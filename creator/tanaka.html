<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#667eea">
  <meta name="description" content="ÈÖç‰ø°ËÄÖÂ∞ÇÁî®„Ç´„Éº„Éâ„Éë„ÉÉ„ÇØË≤©Â£≤„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Pack&Play">
  <title>Áî∞‰∏≠Â§™ÈÉé - Pack&Play</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="manifest" href="../manifest.json">
  <link rel="icon" type="image/png" sizes="192x192" href="../assets/images/icon-192.png">
  <link rel="apple-touch-icon" href="../assets/images/icon-192.png">
  <style>
    body {
      overflow-x: hidden;
      background: #f9fafb;
      display: flex;
      min-height: 100vh;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    /* „Çµ„Ç§„Éâ„Éê„Éº */
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      width: 260px;
      background: white;
      border-right: 1px solid #e5e7eb;
      padding: 2rem 1.5rem 1rem;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      z-index: 1000;
    }

    .sidebar-logo {
      display: block;
      text-decoration: none;
      margin-bottom: 2rem;
      transition: opacity 0.2s;
    }

    .sidebar-logo:hover {
      opacity: 0.8;
    }

    .sidebar-logo-img {
      width: 100%;
      max-width: 180px;
      height: auto;
      display: block;
    }

    .sidebar-nav {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      flex: 1;
    }

    .sidebar-nav-link {
      color: #2d1b3d;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.125rem;
      padding: 1rem 1.25rem;
      border-radius: 0.75rem;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .sidebar-nav-link:hover {
      background: #f3f4f6;
    }

    .sidebar-nav-link.active {
      background: #f3f4f6;
      color: #FF1B8D;
    }

    .sidebar-footer {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid #e5e7eb;
    }

    .sidebar-footer-links {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }

    .sidebar-footer-link {
      color: #6b7280;
      text-decoration: none;
      font-size: 0.8125rem;
      transition: color 0.2s;
    }

    .sidebar-footer-link:hover {
      color: #2d1b3d;
      text-decoration: underline;
    }

    .sidebar-footer-copyright {
      color: #9ca3af;
      font-size: 0.75rem;
      line-height: 1.4;
    }

    /* „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Ç®„É™„Ç¢ */
    .main-wrapper {
      margin-left: 260px;
      flex: 1;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    .creator-content {
      width: 100%;
      max-width: 680px;
      margin: 0 auto;
      background: white;
    }

    /* ÈÖç‰ø°ËÄÖÊÉÖÂ†±„Éê„ÉºÔºàÁµ±ÂêàÁâàÔºâ */
    .creator-info-section {
      display: flex;
      align-items: center;
      gap: 1rem;
      flex: 1;
      min-width: 0;
    }

    .creator-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 1.25rem;
      flex-shrink: 0;
      position: relative;
    }

    .creator-info-text {
      min-width: 0;
      flex: 1;
    }

    .creator-name {
      font-size: 1.125rem;
      font-weight: 800;
      color: #2d1b3d;
      margin-bottom: 0.25rem;
    }

    .creator-meta {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    /* ÈÖç‰ø°„Éó„É¨„Ç§„É§„Éº */
    .stream-player-wrapper {
      position: relative;
      width: 100%;
      padding-bottom: 56.25%; /* 16:9 aspect ratio */
      background: #000;
    }

    .stream-player {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }

    .stream-offline {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      gap: 1rem;
    }

    .stream-offline-icon {
      font-size: 4rem;
    }

    .stream-offline-text {
      font-size: 1.25rem;
      font-weight: 700;
    }

    /* ÈÖç‰ø°ÊÉÖÂ†±„Éê„Éº */
    .stream-info-bar {
      background: white;
      padding: 1rem 1.5rem;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }

    .stream-info-bar .following-button {
      align-self: center;
    }


    .follower-count {
      color: #6b7280;
      font-size: 0.8125rem;
      font-weight: 500;
    }

    /* ÈÖç‰ø°Ê¶ÇË¶ÅÔºà„Çø„ÉñÂÜÖÔºâ */
    .stream-description-content {
      color: #2d1b3d;
      font-size: 0.9375rem;
      line-height: 1.6;
      white-space: pre-wrap;
      word-wrap: break-word;
      position: relative;
      overflow: hidden;
      transition: max-height 0.3s ease;
      padding-bottom: 0.5rem;
    }

    .stream-description-content.collapsed {
      max-height: 4.8rem; /* Á¥Ñ3Ë°åÂàÜ */
    }

    .stream-description-content.expanded {
      max-height: none;
    }

    .stream-description-wrapper {
      position: relative;
    }

    .stream-description-fade {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 2rem;
      background: linear-gradient(to bottom, transparent, white);
      pointer-events: none;
    }

    .stream-description-content.expanded + .stream-description-fade {
      display: none;
    }

    .stream-description-toggle {
      margin-top: 0.5rem;
      background: transparent;
      border: none;
      color: #FF1B8D;
      font-weight: 600;
      font-size: 0.875rem;
      cursor: pointer;
      padding: 0;
      display: flex;
      align-items: center;
      gap: 0.25rem;
      transition: opacity 0.2s;
    }

    .stream-description-toggle:hover {
      opacity: 0.8;
    }

    .stream-description-toggle svg {
      width: 16px;
      height: 16px;
      transition: transform 0.3s ease;
    }

    .stream-description-toggle.expanded svg {
      transform: rotate(180deg);
    }

    .stream-description-empty {
      color: #9ca3af;
      font-size: 0.875rem;
      text-align: center;
      padding: 2rem 1rem;
    }

    /* „Ç¢„ÇØ„Ç∑„Éß„É≥„Éë„Éç„É´ */
    .action-panel {
      background: white;
      border-bottom: 1px solid #e5e7eb;
    }

    .action-tabs {
      display: flex;
      border-bottom: 1px solid #e5e7eb;
    }

    .action-tab {
      flex: 1;
      padding: 1rem;
      background: transparent;
      border: none;
      border-bottom: 2px solid transparent;
      font-weight: 600;
      font-size: 1rem;
      color: #6b7280;
      cursor: pointer;
      transition: all 0.2s;
    }

    .action-tab:hover {
      background: #f9fafb;
    }

    .action-tab.active {
      color: #FF1B8D;
      border-bottom-color: #FF1B8D;
    }

    .action-content {
      display: none;
      padding: 1.5rem;
      max-height: calc(100vh - 650px);
      min-height: 300px;
      overflow-y: auto;
    }

    /* „Çπ„Éó„É©„ÉÉ„Ç∑„É•„Çø„Éñ„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑÂπÖÂà∂Èôê */
    #splashContent {
      max-width: 480px;
      margin: 0 auto;
      padding: 1.5rem 2rem;
    }

    .action-content::-webkit-scrollbar {
      width: 6px;
    }

    .action-content::-webkit-scrollbar-track {
      background: #f3f4f6;
    }

    .action-content::-webkit-scrollbar-thumb {
      background: #d1d5db;
      border-radius: 3px;
    }

    .action-content::-webkit-scrollbar-thumb:hover {
      background: #9ca3af;
    }

    .action-content.active {
      display: block;
    }

    /* „Ç´„Éº„Éâ„Ç∞„É™„ÉÉ„Éâ */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: 1rem;
    }

    .card-item {
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: 0.75rem;
      padding: 1rem 0.75rem;
      transition: all 0.2s;
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .card-item:hover {
      border-color: #FF1B8D;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 27, 141, 0.15);
    }

    .card-icon-large {
      font-size: 2.5rem;
      margin-bottom: 0.25rem;
    }

    .card-name {
      font-weight: 600;
      font-size: 0.875rem;
      color: #2d1b3d;
      margin-bottom: 0.25rem;
    }

    .use-btn {
      padding: 0.375rem 0.75rem;
      border-radius: 0.375rem;
      border: none;
      background: #FF1B8D;
      color: white;
      font-weight: 600;
      font-size: 0.8125rem;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: auto;
    }

    .use-btn:hover {
      background: #e01677;
      transform: translateY(-1px);
    }

    .cards-empty {
      text-align: center;
      padding: 3rem 1rem;
      color: #9ca3af;
    }

    /* „Ç´„Éº„Éâ‰ΩøÁî®„É¢„Éº„ÉÄ„É´ */
    .use-card-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .use-card-modal.active {
      display: flex;
    }

    .use-card-modal-content {
      background: white;
      border-radius: 1rem;
      padding: 2rem;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    }

    .use-card-modal-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .use-card-modal-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
    }

    .use-card-modal-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: #2d1b3d;
      margin-bottom: 0.75rem;
    }

    .use-card-modal-header .badge {
      display: inline-block;
    }

    .use-card-modal-message {
      color: #6b7280;
      font-size: 0.9375rem;
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .use-card-modal-buttons {
      display: flex;
      gap: 0.75rem;
    }

    .use-card-modal-button {
      flex: 1;
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      border: none;
      font-weight: 600;
      font-size: 0.9375rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .use-card-modal-button-cancel {
      background: #f3f4f6;
      color: #6b7280;
    }

    .use-card-modal-button-cancel:hover {
      background: #e5e7eb;
    }

    .use-card-modal-button-confirm {
      background: #FF1B8D;
      color: white;
    }

    .use-card-modal-button-confirm:hover {
      background: #e01677;
    }

    /* „Ç´„Éº„Éâ‰ΩøÁî®„Éà„Éº„Çπ„Éà */
    .card-use-toast {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: white;
      border-radius: 1rem;
      padding: 2rem;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
      z-index: 10000;
      text-align: center;
      min-width: 300px;
      animation: cardUseToastIn 0.3s ease-out forwards;
    }

    @keyframes cardUseToastIn {
      0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.1);
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
    }

    .card-use-toast.fade-out {
      animation: cardUseToastOut 0.3s ease-out forwards;
    }

    @keyframes cardUseToastOut {
      from {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
      to {
        transform: translate(-50%, -50%) scale(0.8);
        opacity: 0;
      }
    }

    .card-use-toast-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
      animation: iconBounce 0.6s ease-out;
    }

    @keyframes iconBounce {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.2);
      }
    }

    .card-use-toast-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: #2d1b3d;
      margin-bottom: 0.5rem;
    }

    .card-use-toast-message {
      font-size: 0.9375rem;
      color: #6b7280;
      margin-bottom: 0.75rem;
    }

    .card-use-toast-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.3);
      z-index: 9999;
      opacity: 0;
      animation: overlayFadeIn 0.3s ease-out forwards;
    }

    .card-use-toast-overlay.fade-out {
      animation: overlayFadeOut 0.3s ease-out forwards;
    }

    @keyframes overlayFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes overlayFadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    /* „Çπ„Éó„É©„ÉÉ„Ç∑„É•„Éó„É¨„Éì„É•„Éº */
    .splash-preview {
      border-radius: 0.5rem;
      padding: 0.875rem;
      margin-bottom: 1rem;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      position: relative;
      overflow: hidden;
    }

    .splash-preview::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      opacity: 1;
      transition: all 0.3s ease;
    }

    .splash-preview-header {
      display: flex;
      align-items: center;
      gap: 0.625rem;
      margin-bottom: 0.625rem;
      position: relative;
      z-index: 1;
    }

    .splash-preview-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 1rem;
      flex-shrink: 0;
      border: 2px solid rgba(255, 255, 255, 0.3);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .splash-preview-info {
      flex: 1;
      min-width: 0;
    }

    .splash-preview-name {
      font-size: 0.875rem;
      font-weight: 700;
      color: white;
      margin-bottom: 0.125rem;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .splash-preview-amount {
      font-size: 1rem;
      font-weight: 800;
      color: white;
      text-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
    }

    .splash-preview-message {
      position: relative;
      z-index: 1;
    }

    .splash-preview-input {
      width: 100%;
      padding: 0.625rem;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 0.375rem;
      font-size: 0.875rem;
      resize: vertical;
      min-height: 60px;
      font-family: inherit;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      color: white;
      transition: all 0.2s;
    }

    .splash-preview-input::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }

    .splash-preview-input:focus {
      outline: none;
      border-color: rgba(255, 255, 255, 0.5);
      background: rgba(255, 255, 255, 0.2);
    }

    .splash-preview-input:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      background: rgba(255, 255, 255, 0.08);
    }

    /* ÈáëÈ°ç„Åî„Å®„ÅÆ„Éó„É¨„Éì„É•„ÉºËâ≤ */
    .splash-preview[data-tier="1"]::before {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    }

    .splash-preview[data-tier="2"]::before {
      background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
    }

    .splash-preview[data-tier="3"]::before {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }

    .splash-preview[data-tier="4"]::before {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    }

    .splash-preview[data-tier="5"]::before {
      background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
    }

    .splash-preview[data-tier="6"]::before {
      background: linear-gradient(135deg, #FF1B8D 0%, #e01677 100%);
    }

    /* „Çπ„É©„Ç§„Éâ„Éê„Éº„Ç≥„É≥„ÉÜ„Éä */
    .splash-slider-container {
      margin-bottom: 0.75rem;
    }

    .splash-amount-input-wrapper {
      display: flex;
      justify-content: center;
      align-items: baseline;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .splash-amount-input {
      width: 100px;
      padding: 0.375rem 0.25rem;
      border: none;
      border-bottom: 2px solid #d1d5db;
      background: transparent;
      font-size: 1.25rem;
      font-weight: 700;
      color: #2d1b3d;
      text-align: center;
      transition: all 0.2s;
      -moz-appearance: textfield;
    }

    .splash-amount-input:focus {
      outline: none;
      border-bottom-color: #FF1B8D;
    }

    /* „Çπ„Éî„É≥„Éú„Çø„É≥„ÇíÈùûË°®Á§∫ */
    .splash-amount-input::-webkit-inner-spin-button,
    .splash-amount-input::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .splash-amount-unit {
      font-size: 0.875rem;
      color: #6b7280;
      font-weight: 600;
    }

    .splash-slider-wrapper {
      width: 100%;
      margin-bottom: 0.75rem;
    }

    /* „Çπ„É©„Ç§„Éâ„Éê„Éº */
    .splash-slider {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 6px;
      border-radius: 4px;
      background: #e5e7eb;
      outline: none;
      transition: background 0.2s;
    }

    .splash-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #FF1B8D;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(255, 27, 141, 0.3);
      transition: all 0.2s;
    }

    .splash-slider::-webkit-slider-thumb:hover {
      transform: scale(1.15);
      box-shadow: 0 3px 10px rgba(255, 27, 141, 0.5);
    }

    .splash-slider::-webkit-slider-thumb:active {
      transform: scale(1.1);
    }

    .splash-slider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #FF1B8D;
      cursor: pointer;
      border: none;
      box-shadow: 0 2px 6px rgba(255, 27, 141, 0.3);
      transition: all 0.2s;
    }

    .splash-slider::-moz-range-thumb:hover {
      transform: scale(1.15);
      box-shadow: 0 3px 10px rgba(255, 27, 141, 0.5);
    }

    .splash-slider::-moz-range-thumb:active {
      transform: scale(1.1);
    }

    .send-button {
      width: 100%;
      max-width: 100%;
      padding: 0.875rem;
      border-radius: 0.5rem;
      border: none;
      background: linear-gradient(135deg, #FF1B8D 0%, #e01677 100%);
      color: white;
      font-weight: 800;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 3px 10px rgba(255, 27, 141, 0.25);
      position: relative;
      overflow: hidden;
    }

    .send-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.5s;
    }

    .send-button:hover::before {
      left: 100%;
    }

    .send-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(255, 27, 141, 0.35);
    }

    .send-button:active {
      transform: translateY(0);
    }

    .send-button:disabled {
      background: linear-gradient(135deg, #d1d5db 0%, #9ca3af 100%);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .send-button:disabled::before {
      display: none;
    }

    /* „Éë„ÉÉ„ÇØ„Ç∞„É™„ÉÉ„Éâ */
    .packs-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 0.75rem;
    }

    .pack-card {
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 0.75rem;
      overflow: hidden;
      transition: all 0.2s;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .pack-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .pack-image {
      width: 80px;
      height: 80px;
      flex-shrink: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
    }

    .pack-content {
      padding: 0.75rem 0.75rem 0.75rem 0;
      flex: 1;
      min-width: 0;
    }

    .pack-name {
      font-size: 1rem;
      font-weight: 700;
      color: #2d1b3d;
      margin-bottom: 0.25rem;
    }

    .pack-description {
      color: #6b7280;
      font-size: 0.8125rem;
      margin-bottom: 0.75rem;
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .pack-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.75rem;
    }

    .pack-price {
      font-size: 1.125rem;
      font-weight: 800;
      color: #2d1b3d;
      white-space: nowrap;
    }

    .buy-button {
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      border: none;
      background: #FF1B8D;
      color: white;
      font-weight: 700;
      font-size: 0.8125rem;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }

    .buy-button:hover {
      background: #e01677;
      transform: translateY(-1px);
    }

    /* „É¢„Éê„Ç§„É´„É°„Éã„É•„Éº„Éú„Çø„É≥„Å®„Ç™„Éº„Éê„Éº„É¨„Ç§„ÅØ css/style.css „ÅßÂÆöÁæ© */

    .sidebar.mobile-open {
      display: flex;
    }

    /* „É¢„Éê„Ç§„É´ÂØæÂøú */
    @media (max-width: 768px) {
      body {
        display: block;
      }

      .mobile-menu-button {
        display: flex;
      }

      .sidebar {
        display: none;
      }

      .main-wrapper {
        margin-left: 0;
      }

      .creator-content {
        max-width: 100%;
      }

      /* ÈÖç‰ø°ËÄÖÊÉÖÂ†±„Éê„ÉºÔºà„É¢„Éê„Ç§„É´Ôºâ */
      .stream-info-bar {
        padding: 0.75rem 1rem;
        gap: 0.75rem;
        align-items: center;
        flex-wrap: nowrap;
      }

      .creator-info-section {
        flex: 1;
        min-width: 0;
        gap: 0.75rem;
        align-items: center;
      }

      .creator-avatar {
        width: 40px;
        height: 40px;
        font-size: 1.125rem;
        position: relative;
      }

      .creator-info-text {
        min-width: 0;
        flex: 1;
      }

      .creator-name {
        font-size: 0.9375rem;
        line-height: 1.3;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .creator-meta {
        gap: 0.5rem;
        font-size: 0.75rem;
      }

      .stream-info-bar .following-button {
        padding: 0.5rem 0.75rem;
        font-size: 0.75rem;
        white-space: nowrap;
        flex-shrink: 0;
        align-self: center;
        position: static !important;
        transform: none !important;
        margin: 0;
        min-width: 90px;
        right: auto !important;
        top: auto !important;
      }

      .following-button:hover {
        transform: none !important;
      }

      .following-button:active {
        transform: none !important;
      }

      .following-button:hover span::before {
        content: '„Éï„Ç©„É≠„ÉºËß£Èô§';
      }

      .following-button.unfollow-style:hover {
        transform: none !important;
      }

      .following-button.unfollow-style:active {
        transform: none !important;
      }

      .follower-count {
        font-size: 0.75rem;
      }

      .action-tab {
        padding: 0.75rem 0.5rem;
        font-size: 0.875rem;
      }

      .action-content {
        padding: 1rem;
        max-height: calc(100vh - 500px);
        min-height: 250px;
      }

      /* „Çπ„Éó„É©„ÉÉ„Ç∑„É•„Çø„Éñ - „É¢„Éê„Ç§„É´Ë™øÊï¥ */
      #splashContent {
        padding: 1rem;
        max-width: 100%;
      }

      #splashContent .splash-preview,
      #splashContent .splash-slider-container,
      #splashContent .send-button {
        max-width: 100%;
        width: 100%;
      }

      .splash-amount-input-wrapper {
        margin-bottom: 0.75rem;
      }

      .splash-slider-wrapper {
        width: 100%;
      }

      .cards-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
      }

      .card-item {
        padding: 0.75rem 0.5rem;
      }

      .card-icon-large {
        font-size: 2rem;
      }

      .use-btn {
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
      }

      /* „Çπ„Éó„É©„ÉÉ„Ç∑„É•„Çø„Éñ„Çí„Ç≥„É≥„Éë„ÇØ„Éà„Å´ */
      .splash-preview {
        padding: 0.75rem;
        margin-bottom: 0.75rem;
        margin-left: 0;
        margin-right: 0;
        width: 100%;
      }

      .splash-preview-header {
        margin-bottom: 0.5rem;
        gap: 0.5rem;
      }

      .splash-preview-avatar {
        width: 32px;
        height: 32px;
        font-size: 0.75rem;
      }

      .splash-preview-name {
        font-size: 0.75rem;
        margin-bottom: 0;
      }

      .splash-preview-amount {
        font-size: 0.875rem;
      }

      .splash-preview-input {
        min-height: 50px;
        font-size: 0.8125rem;
        padding: 0.5rem;
        width: 100%;
      }

      .splash-amount-input-wrapper {
        margin-bottom: 0.5rem;
      }

      .splash-amount-input {
        width: 80px;
        font-size: 1rem;
        padding: 0.25rem 0.25rem;
      }

      .splash-amount-unit {
        font-size: 0.75rem;
      }

      .splash-slider-container {
        margin-bottom: 0.75rem;
        width: 100%;
      }

      .splash-slider-wrapper {
        margin-bottom: 0.5rem;
        width: 100%;
      }

      .splash-slider {
        height: 6px;
        width: 100%;
      }

      .splash-slider::-webkit-slider-thumb {
        width: 16px;
        height: 16px;
      }

      .splash-slider::-moz-range-thumb {
        width: 16px;
        height: 16px;
      }

      .send-button {
        padding: 0.75rem;
        font-size: 0.875rem;
        width: 100%;
        max-width: 100%;
      }

      /* „Ç´„Éº„Éâ‰ΩøÁî®„É¢„Éº„ÉÄ„É´ - „É¢„Éê„Ç§„É´ */
      .use-card-modal-content {
        padding: 1.5rem;
        max-width: 90%;
      }

      .use-card-modal-icon {
        font-size: 3rem;
        margin-bottom: 0.75rem;
      }

      .use-card-modal-title {
        font-size: 1.125rem;
      }

      .use-card-modal-message {
        font-size: 0.875rem;
        margin-bottom: 1.25rem;
      }

      .use-card-modal-button {
        font-size: 0.875rem;
        padding: 0.625rem 0.75rem;
      }

      /* „Ç´„Éº„Éâ‰ΩøÁî®„Éà„Éº„Çπ„Éà - „É¢„Éê„Ç§„É´ */
      .card-use-toast {
        min-width: 280px;
        padding: 1.5rem;
      }

      .card-use-toast-icon {
        font-size: 3rem;
        margin-bottom: 0.75rem;
      }

      .card-use-toast-title {
        font-size: 1.125rem;
      }

      .card-use-toast-message {
        font-size: 0.875rem;
      }
    }

    /* „Çπ„É†„Éº„Çπ„Çπ„ÇØ„É≠„Éº„É´ */
    html {
      scroll-behavior: smooth;
    }

    /* „Çø„ÉÉ„ÉÅ„Éï„É¨„É≥„Éâ„É™„Éº */
    button, .card-item, .splash-option, .pack-card {
      -webkit-tap-highlight-color: transparent;
    }
  </style>
</head>
<body>
  <!-- „É¢„Éê„Ç§„É´„É°„Éã„É•„Éº„Éú„Çø„É≥ -->
  <button type="button" class="mobile-menu-button" id="mobileMenuButton" onclick="toggleMobileMenu()">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7"></path>
    </svg>
  </button>

  <!-- „É¢„Éê„Ç§„É´„É°„Éã„É•„Éº„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
  <div class="mobile-menu-overlay" id="mobileMenuOverlay" onclick="closeMobileMenu()"></div>

  <!-- „Çµ„Ç§„Éâ„Éê„Éº -->
  <aside class="sidebar" id="sidebar">
    <a href="../profile.html" class="sidebar-logo">
      <img src="../image/logo.png" alt="Pack&Play" class="sidebar-logo-img">
    </a>
    <nav class="sidebar-nav" id="sidebarNav">
      <!-- JavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
    </nav>

    <div class="sidebar-footer">
      <div class="sidebar-footer-links">
        <a href="../legal/terms.html" class="sidebar-footer-link">Âà©Áî®Ë¶èÁ¥Ñ</a>
        <a href="../legal/privacy.html" class="sidebar-footer-link">„Éó„É©„Ç§„Éê„Ç∑„Éº</a>
        <a href="../legal/commerce.html" class="sidebar-footer-link">ÁâπÂïÜÊ≥ïË°®Ë®ò</a>
        <a href="../legal/scta.html" class="sidebar-footer-link">Ë≥áÈáëÊ±∫Ê∏àÊ≥ï</a>
        <a href="../legal/contact.html" class="sidebar-footer-link">„ÅäÂïè„ÅÑÂêà„Çè„Åõ</a>
      </div>
      <div class="sidebar-footer-copyright">
        ¬© 2025 Pack&Play
      </div>
    </div>
  </aside>

  <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ„É©„ÉÉ„Éë„Éº -->
  <div class="main-wrapper">
    <main class="creator-content">
      <!-- ÈÖç‰ø°„Éó„É¨„Ç§„É§„Éº -->
      <div class="stream-player-wrapper">
        <!-- ÈÖç‰ø°‰∏≠„ÅÆÂ†¥Âêà„ÅØiframe„ÇíË°®Á§∫ -->
        <iframe
          id="streamPlayer"
          class="stream-player"
          src=""
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
          style="display: none;">
        </iframe>

        <!-- ÈÖç‰ø°„Åó„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà -->
        <div class="stream-offline" id="streamOffline">
          <div class="stream-offline-icon">üì∫</div>
          <div class="stream-offline-text">ÁèæÂú®ÈÖç‰ø°„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì</div>
        </div>
      </div>

      <!-- ÈÖç‰ø°ËÄÖÊÉÖÂ†±„Éê„ÉºÔºàÁµ±ÂêàÁâàÔºâ -->
      <div class="stream-info-bar" id="streamInfoBar">
        <div class="creator-info-section">
          <div class="creator-avatar" id="creatorAvatar">
            Áî∞
            <span class="live-signal" id="liveSignal" style="display: none;"></span>
          </div>
          <div class="creator-info-text">
            <div class="creator-name" id="creatorName">Áî∞‰∏≠Â§™ÈÉé</div>
            <div class="creator-meta">
              <span class="follower-count" id="followerCount">0 „Éï„Ç©„É≠„ÉØ„Éº</span>
            </div>
          </div>
        </div>
        <button type="button" class="following-button" id="followButton">
          <span>„Éï„Ç©„É≠„Éº„Åô„Çã</span>
        </button>
      </div>

      <!-- „Ç¢„ÇØ„Ç∑„Éß„É≥„Éë„Éç„É´ -->
      <div class="action-panel">
        <div class="action-tabs">
          <button type="button" class="action-tab active" id="overviewTab" onclick="switchActionTab('overview')">Ê¶ÇË¶Å</button>
          <button type="button" class="action-tab" onclick="switchActionTab('cards')">„Ç´„Éº„Éâ</button>
          <button type="button" class="action-tab" onclick="switchActionTab('splash')">„Çπ„Éó„É©„ÉÉ„Ç∑„É•</button>
          <button type="button" class="action-tab" onclick="switchActionTab('packs')">„Éë„ÉÉ„ÇØ</button>
        </div>

        <!-- Ê¶ÇË¶Å„Çø„Éñ -->
        <div class="action-content active" id="overviewContent">
          <div class="stream-description-wrapper">
            <div class="stream-description-content collapsed" id="streamDescription">
              <!-- JavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
            </div>
            <div class="stream-description-fade" id="streamDescriptionFade"></div>
          </div>
          <button type="button" class="stream-description-toggle" id="streamDescriptionToggle" onclick="toggleDescription()" style="display: none;">
            <span id="toggleText">„ÇÇ„Å£„Å®Ë¶ã„Çã</span>
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div class="stream-description-empty" id="streamDescriptionEmpty" style="display: none;">
            ÈÖç‰ø°Ê¶ÇË¶Å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì
          </div>
        </div>

        <!-- „Ç´„Éº„Éâ„Çø„Éñ -->
        <div class="action-content" id="cardsContent">
          <div class="cards-grid" id="cardsGrid">
            <!-- JavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
          </div>
        </div>

        <!-- „Çπ„Éó„É©„ÉÉ„Ç∑„É•„Çø„Éñ -->
        <div class="action-content" id="splashContent">
          <!-- „Éó„É¨„Éì„É•„Éº -->
          <div class="splash-preview" id="splashPreview" data-tier="1">
            <div class="splash-preview-header">
              <div class="splash-preview-avatar" id="splashPreviewAvatar">Ë¶ñ</div>
              <div class="splash-preview-info">
                <div class="splash-preview-name" id="splashPreviewName">Ë¶ñËÅ¥ËÄÖ</div>
                <div class="splash-preview-amount" id="splashPreviewAmount">100„Çπ„Éë„Éº„ÇØ</div>
              </div>
            </div>
            <div class="splash-preview-message">
              <textarea
                class="splash-preview-input"
                id="splashMessage"
                placeholder="„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÈÄÅ„Çã„Å´„ÅØ200„Çπ„Éë„Éº„ÇØ‰ª•‰∏äÂøÖË¶Å„Åß„Åô"
                maxlength="0"
                disabled></textarea>
            </div>
          </div>

          <!-- ÈáëÈ°ç„Ç≥„É≥„Éà„É≠„Éº„É´ -->
          <div class="splash-slider-container">
            <!-- ÈáëÈ°çÂÖ•ÂäõÔºà„Çπ„É©„Ç§„ÉÄ„Éº‰∏äÈÉ®‰∏≠Â§ÆÔºâ -->
            <div class="splash-amount-input-wrapper">
              <input
                type="number"
                class="splash-amount-input"
                id="splashAmountInput"
                min="100"
                max="50000"
                step="100"
                value="100"
                oninput="updateFromInput()"
                onkeydown="handleSparkKeydown(event)">
              <span class="splash-amount-unit">„Çπ„Éë„Éº„ÇØ</span>
            </div>

            <!-- „Çπ„É©„Ç§„Éâ„Éê„Éº -->
            <div class="splash-slider-wrapper">
              <input
                type="range"
                class="splash-slider"
                id="splashSlider"
                min="0"
                max="10"
                value="0"
                step="1"
                oninput="updateFromSlider(this.value)">
            </div>
          </div>

          <!-- ÈÄÅ‰ø°„Éú„Çø„É≥ -->
          <button type="button" class="send-button" id="sendSplashButton" onclick="sendSplash()">
            „Çπ„Éó„É©„ÉÉ„Ç∑„É•„ÇíÈÄÅ„Çã
          </button>
        </div>

        <!-- „Éë„ÉÉ„ÇØ„Çø„Éñ -->
        <div class="action-content" id="packsContent">
          <div class="packs-grid" id="packsGrid">
            <!-- JavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="../js/mock-data.js"></script>
  <script src="../js/main.js"></script>
  <script>
    // ÈÖç‰ø°ËÄÖÊÉÖÂ†±„ÇíÂèñÂæó
    const creatorSlug = 'tanaka';
    const creator = getCreatorBySlug(creatorSlug);
    const creatorPacks = getPacksByCreator(creatorSlug);

    // „Çµ„Ç§„Éâ„Éê„Éº„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„Çí„É¨„É≥„ÉÄ„É™„É≥„Ç∞Ôºàcreator/ÈÖç‰∏ãÁî®„Å´„Éë„ÇπË™øÊï¥Ôºâ
    function renderCreatorSidebarNav() {
      const sidebarNav = document.getElementById('sidebarNav');
      if (!sidebarNav) return;

      let navHTML = '';

      if (isLoggedIn()) {
        const session = getCurrentSession();
        const role = session.role;

        if (role === 'creator') {
          navHTML = `
            <a href="${getRelativePath('profile.html')}" class="sidebar-nav-link">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
              </svg>
              „Éó„É≠„Éï„Ç£„Éº„É´
            </a>
            <a href="${getRelativePath('discover.html')}" class="sidebar-nav-link">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
              ÈÖç‰ø°ËÄÖ„ÇíÊé¢„Åô
            </a>
            <a href="${getRelativePath('dashboard/index.html')}" class="sidebar-nav-link">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 13a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1v-7z"></path>
              </svg>
              „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ
            </a>
            <a href="${getRelativePath('history.html')}" class="sidebar-nav-link">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              Â±•Ê≠¥
            </a>
            <a href="${getRelativePath('settings.html')}" class="sidebar-nav-link">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
              </svg>
              Ë®≠ÂÆö
            </a>
            <a href="javascript:void(0)" onclick="logout()" class="sidebar-nav-link" style="margin-top: auto;">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
              </svg>
              „É≠„Ç∞„Ç¢„Ç¶„Éà
            </a>
          `;
        } else {
          // viewer role
          navHTML = `
            <a href="${getRelativePath('profile.html')}" class="sidebar-nav-link">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
              </svg>
              „Éó„É≠„Éï„Ç£„Éº„É´
            </a>
            <a href="${getRelativePath('discover.html')}" class="sidebar-nav-link">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
              </svg>
              ÈÖç‰ø°ËÄÖ„ÇíÊé¢„Åô
            </a>
            <a href="${getRelativePath('following.html')}" class="sidebar-nav-link">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
              </svg>
              „Éï„Ç©„É≠„Éº‰∏≠
            </a>
            <a href="${getRelativePath('inventory.html')}" class="sidebar-nav-link">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
              </svg>
              „Éû„Ç§„Ç´„Éº„Éâ
            </a>
            <a href="${getRelativePath('history.html')}" class="sidebar-nav-link">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              Â±•Ê≠¥
            </a>
            <a href="${getRelativePath('settings.html')}" class="sidebar-nav-link">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
              </svg>
              Ë®≠ÂÆö
            </a>
            <a href="javascript:void(0)" onclick="logout()" class="sidebar-nav-link" style="margin-top: auto;">
              <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
              </svg>
              „É≠„Ç∞„Ç¢„Ç¶„Éà
            </a>
          `;
        }
      } else {
        // „É≠„Ç∞„Ç§„É≥„Åó„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà
        navHTML = `
          <a href="${getRelativePath('index.html')}" class="sidebar-nav-link">
            <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
            </svg>
            „Éõ„Éº„É†
          </a>
          <a href="${getRelativePath('discover.html')}" class="sidebar-nav-link">
            <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            ÈÖç‰ø°ËÄÖ„ÇíÊé¢„Åô
          </a>
        `;
      }

      sidebarNav.innerHTML = navHTML;
    }

    renderCreatorSidebarNav();

    // „ÇØ„É™„Ç®„Ç§„Çø„ÉºÊÉÖÂ†±„ÇíË®≠ÂÆö
    // Note: creatorAvatar text is hardcoded in HTML, don't use textContent as it removes child elements (live-signal)
    document.getElementById('creatorName').textContent = creator.name;

    // „Éï„Ç©„É≠„ÉºËß£Èô§
    function unfollowCreator(event) {
      event.preventDefault();
      event.stopPropagation();

      // „Ç´„Çπ„Çø„É†„É¢„Éº„ÉÄ„É´„ÇíË°®Á§∫
      showUnfollowModal();
    }

    // „Éï„Ç©„É≠„ÉºËß£Èô§„É¢„Éº„ÉÄ„É´„ÇíË°®Á§∫
    function showUnfollowModal() {
      const modal = document.getElementById('unfollowModal');
      const message = document.getElementById('unfollowModalMessage');
      const confirmButton = document.getElementById('unfollowConfirmButton');

      message.textContent = `${creator.name}„ÅÆ„Éï„Ç©„É≠„Éº„ÇíËß£Èô§„Åó„Åæ„Åô„ÅãÔºü`;

      confirmButton.onclick = function() {
        toggleFollow(creator.id);

        // „Éú„Çø„É≥„Çí„Äå„Éï„Ç©„É≠„Éº„Åô„Çã„Äç„Å´Â§âÊõ¥
        const button = document.getElementById('followButton');
        if (button) {
          button.className = 'following-button unfollow-style';
          button.innerHTML = '<span>„Éï„Ç©„É≠„Éº„Åô„Çã</span>';
          button.onclick = (e) => followCreator(e);
          button.blur();
        }

        closeUnfollowModal();
      };

      modal.classList.add('active');
    }

    // „Éï„Ç©„É≠„ÉºËß£Èô§„É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
    function closeUnfollowModal() {
      const modal = document.getElementById('unfollowModal');
      modal.classList.remove('active');
    }

    // „Éï„Ç©„É≠„Éº„Åô„Çã
    function followCreator(event) {
      event.preventDefault();
      event.stopPropagation();

      toggleFollow(creator.id);

      // „Éú„Çø„É≥„Çí„Äå„Éï„Ç©„É≠„Éº‰∏≠„Äç„Å´Â§âÊõ¥
      const button = document.getElementById('followButton');
      if (button) {
        button.className = 'following-button';
        button.innerHTML = '<span>„Éï„Ç©„É≠„Éº‰∏≠</span>';
        button.onclick = (e) => unfollowCreator(e);
        button.blur();
      }
    }

    // ÂàùÊúüÂåñÔºö„Éï„Ç©„É≠„ÉºÁä∂ÊÖã„ÇíÁ¢∫Ë™ç„Åó„Å¶„Éú„Çø„É≥„ÇíË®≠ÂÆö
    function initFollowButton() {
      const followedIds = getFollowedCreators();
      const isFollowing = followedIds.includes(creator.id);
      const button = document.getElementById('followButton');

      if (button) {
        if (isFollowing) {
          button.className = 'following-button';
          button.innerHTML = '<span>„Éï„Ç©„É≠„Éº‰∏≠</span>';
          button.onclick = (e) => unfollowCreator(e);
        } else {
          button.className = 'following-button unfollow-style';
          button.innerHTML = '<span>„Éï„Ç©„É≠„Éº„Åô„Çã</span>';
          button.onclick = (e) => followCreator(e);
        }
      }
    }

    // ÈÖç‰ø°„Éó„É¨„Ç§„É§„Éº„ÅÆË®≠ÂÆö
    function setupStreamPlayer() {
      const player = document.getElementById('streamPlayer');
      const offline = document.getElementById('streamOffline');
      const liveSignal = document.getElementById('liveSignal');

      console.log('Creator:', creator);
      console.log('isLive:', creator.isLive);
      console.log('liveSignal element:', liveSignal);

      if (creator.isLive && creator.streamUrl) {
        // ÈÖç‰ø°‰∏≠„ÅÆÂ†¥Âêà
        player.src = creator.streamUrl;
        player.style.display = 'block';
        offline.style.display = 'none';

        // LIVE‰ø°Âè∑„ÇíË°®Á§∫
        if (liveSignal) {
          liveSignal.style.display = 'block';
          console.log('LIVE signal shown');
        } else {
          console.error('liveSignal element not found');
        }

        // ÈÖç‰ø°Ê¶ÇË¶Å„ÇíË®≠ÂÆö
        if (creator.streamDescription) {
          setupStreamDescription(creator.streamDescription);
        } else {
          showEmptyDescription();
        }
      } else {
        // ÈÖç‰ø°„Åó„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà
        player.style.display = 'none';
        offline.style.display = 'flex';

        // LIVE‰ø°Âè∑„ÇíÈùûË°®Á§∫
        if (liveSignal) {
          liveSignal.style.display = 'none';
        }

        showEmptyDescription();
      }
    }

    // „Éï„Ç©„É≠„ÉØ„ÉºÊï∞„ÇíÊõ¥Êñ∞
    function updateFollowerCount() {
      const followedIds = getFollowedCreators();
      const followerCount = Math.floor(Math.random() * 50000) + 1000; // „É¢„ÉÉ„ÇØ„Éá„Éº„Çø
      document.getElementById('followerCount').textContent = `${followerCount.toLocaleString()} „Éï„Ç©„É≠„ÉØ„Éº`;
    }

    // Á©∫„ÅÆÊ¶ÇË¶ÅË°®Á§∫
    function showEmptyDescription() {
      document.getElementById('streamDescription').style.display = 'none';
      document.getElementById('streamDescriptionToggle').style.display = 'none';
      document.getElementById('streamDescriptionFade').style.display = 'none';
      document.getElementById('streamDescriptionEmpty').style.display = 'block';
    }

    // ÈÖç‰ø°Ê¶ÇË¶Å„ÅÆ„Çª„ÉÉ„Éà„Ç¢„ÉÉ„Éó
    function setupStreamDescription(description) {
      const descriptionElement = document.getElementById('streamDescription');
      const toggleButton = document.getElementById('streamDescriptionToggle');
      const fade = document.getElementById('streamDescriptionFade');
      const emptyElement = document.getElementById('streamDescriptionEmpty');

      descriptionElement.textContent = description;
      descriptionElement.style.display = 'block';
      emptyElement.style.display = 'none';

      // È´ò„Åï„Çí„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Å¶„ÄÅ3Ë°å„ÇíË∂Ö„Åà„ÇãÂ†¥Âêà„ÅØ„Éà„Ç∞„É´„Éú„Çø„É≥„ÇíË°®Á§∫
      setTimeout(() => {
        const lineHeight = parseFloat(getComputedStyle(descriptionElement).lineHeight);
        const maxHeight = lineHeight * 3;

        if (descriptionElement.scrollHeight > maxHeight) {
          toggleButton.style.display = 'flex';
          fade.style.display = 'block';
        } else {
          toggleButton.style.display = 'none';
          fade.style.display = 'none';
          descriptionElement.classList.remove('collapsed');
          descriptionElement.classList.add('expanded');
        }
      }, 0);
    }

    // ÈÖç‰ø°Ê¶ÇË¶Å„ÅÆÂ±ïÈñã/Êäò„Çä„Åü„Åü„Åø
    function toggleDescription() {
      const descriptionElement = document.getElementById('streamDescription');
      const toggleButton = document.getElementById('streamDescriptionToggle');
      const toggleText = document.getElementById('toggleText');
      const fade = document.getElementById('streamDescriptionFade');

      const isExpanded = descriptionElement.classList.contains('expanded');

      if (isExpanded) {
        // Êäò„Çä„Åü„Åü„ÇÄ
        descriptionElement.classList.remove('expanded');
        descriptionElement.classList.add('collapsed');
        toggleButton.classList.remove('expanded');
        toggleText.textContent = '„ÇÇ„Å£„Å®Ë¶ã„Çã';
        fade.style.display = 'block';
      } else {
        // Â±ïÈñã„Åô„Çã
        descriptionElement.classList.remove('collapsed');
        descriptionElement.classList.add('expanded');
        toggleButton.classList.add('expanded');
        toggleText.textContent = 'Èñâ„Åò„Çã';
        fade.style.display = 'none';
      }
    }


    // „Ç´„Éº„Éâ„ÇíË°®Á§∫
    function renderCards() {
      const grid = document.getElementById('cardsGrid');

      // „Ç§„É≥„Éô„É≥„Éà„É™„Åã„Çâ„Åì„ÅÆÈÖç‰ø°ËÄÖ„ÅÆÊú™‰ΩøÁî®„Ç´„Éº„Éâ„ÅÆ„Åø„ÇíÂèñÂæó
      const inventory = loadFromStorage('inventory', []);
      const creatorCards = inventory.filter(card => card.creatorSlug === creatorSlug && !card.isUsed);

      if (creatorCards.length === 0) {
        grid.innerHTML = `
          <div class="cards-empty">
            ${creator.name}„ÅÆ„Ç´„Éº„Éâ„ÇíÊåÅ„Å£„Å¶„ÅÑ„Åæ„Åõ„Çì<br>
            „Éë„ÉÉ„ÇØ„ÇíË≥ºÂÖ•„Åó„Å¶„Ç´„Éº„Éâ„Çí„Ç≤„ÉÉ„Éà„Åó„Çà„ÅÜÔºÅ
          </div>
        `;
        return;
      }

      const cardIcons = {
        'message': 'üí¨',
        'action': '‚ö°',
        'visual': '‚ú®'
      };

      grid.innerHTML = creatorCards.map((card, index) => `
        <div class="card-item">
          <div class="card-icon-large">${cardIcons[card.type] || 'üé¥'}</div>
          <div class="card-name">${card.name}</div>
          <div class="badge badge-rarity-${card.rarity.toLowerCase()}">${card.rarity}</div>
          <button type="button" class="use-btn" onclick="openUseCardModal(${index})">‰Ωø„ÅÜ</button>
        </div>
      `).join('');
    }

    let selectedCardForUse = null;

    function openUseCardModal(index) {
      const inventory = loadFromStorage('inventory', []);
      const creatorCards = inventory.filter(card => card.creatorSlug === creatorSlug && !card.isUsed);
      selectedCardForUse = creatorCards[index];

      const cardIcons = {
        'message': 'üí¨',
        'action': '‚ö°',
        'visual': '‚ú®'
      };

      // „É¢„Éº„ÉÄ„É´„ÅÆÂÜÖÂÆπ„ÇíË®≠ÂÆö
      document.getElementById('useCardModalIcon').textContent = cardIcons[selectedCardForUse.type] || 'üé¥';
      document.getElementById('useCardModalTitle').textContent = selectedCardForUse.name;
      document.getElementById('useCardModalBadge').textContent = selectedCardForUse.rarity;
      document.getElementById('useCardModalBadge').className = `badge badge-rarity-${selectedCardForUse.rarity.toLowerCase()}`;

      const cardTypeText = {
        'message': '„É°„ÉÉ„Çª„Éº„Ç∏„Ç´„Éº„Éâ',
        'action': '„Ç¢„ÇØ„Ç∑„Éß„É≥„Ç´„Éº„Éâ',
        'visual': '„Éì„Ç∏„É•„Ç¢„É´„Ç´„Éº„Éâ'
      };
      document.getElementById('useCardModalMessage').textContent = `„Åì„ÅÆ${cardTypeText[selectedCardForUse.type]}„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÅãÔºü`;

      // Á¢∫Ë™ç„Éú„Çø„É≥„ÅÆ„Ç§„Éô„É≥„Éà„ÇíË®≠ÂÆö
      document.getElementById('useCardConfirmButton').onclick = function() {
        closeUseCardModal();
        useCard(selectedCardForUse);
      };

      // „É¢„Éº„ÉÄ„É´„ÇíË°®Á§∫
      document.getElementById('useCardModal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeUseCardModal() {
      document.getElementById('useCardModal').classList.remove('active');
      document.body.style.overflow = '';
    }

    // „É¢„Éº„ÉÄ„É´Â§ñ„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„Çã
    document.addEventListener('click', function(e) {
      if (e.target.id === 'useCardModal') {
        closeUseCardModal();
      }
    });

    function useCard(card) {
      showLoading();

      setTimeout(() => {
        hideLoading();

        // „Ç´„Éº„Éâ„Çí‰ΩøÁî®Ê∏à„Åø„Å´„Éû„Éº„ÇØ
        const inventory = loadFromStorage('inventory', []);
        const cardIndex = inventory.findIndex(c =>
          c.id === card.id &&
          c.acquiredAt === card.acquiredAt &&
          c.creatorSlug === card.creatorSlug
        );

        if (cardIndex !== -1) {
          inventory[cardIndex].isUsed = true;
          saveToStorage('inventory', inventory);

          // ÊâøË™çÂæÖ„Å°„Ç≠„É•„Éº„Å´ËøΩÂä†Ôºàmessage„Çø„Ç§„Éó„ÅÆÂ†¥ÂêàÔºâ
          if (card.type === 'message') {
            const redemptions = loadFromStorage('redemptions', []);
            redemptions.push({
              id: Date.now(),
              cardId: card.id,
              cardName: card.name,
              cardType: card.type,
              rarity: card.rarity,
              viewerName: 'Ë¶ñËÅ¥ËÄÖ',
              message: 'Ôºà„Ç´„Éº„Éâ‰ΩøÁî®Ôºâ',
              timestamp: new Date().toISOString(),
              status: 'pending'
            });
            saveToStorage('redemptions', redemptions);
          }

          renderCards(); // „Ç´„Éº„Éâ‰∏ÄË¶ß„ÇíÂÜçÊèèÁîª
          showCardUseToast(card); // „Ç´„Çπ„Çø„É†„Éà„Éº„Çπ„ÉàË°®Á§∫
        } else {
          showToast('„Ç´„Éº„Éâ„ÅÆ‰ΩøÁî®„Å´Â§±Êïó„Åó„Åæ„Åó„Åü', 'error');
        }
      }, 500);
    }

    // „Ç´„Éº„Éâ‰ΩøÁî®„Éà„Éº„Çπ„Éà„ÇíË°®Á§∫
    function showCardUseToast(card) {
      const cardIcons = {
        'message': 'üí¨',
        'action': '‚ö°',
        'visual': '‚ú®'
      };

      // „Ç™„Éº„Éê„Éº„É¨„Ç§„Çí‰ΩúÊàê
      const overlay = document.createElement('div');
      overlay.className = 'card-use-toast-overlay';
      document.body.appendChild(overlay);

      // „Éà„Éº„Çπ„Éà„Çí‰ΩúÊàê
      const toast = document.createElement('div');
      toast.className = 'card-use-toast';
      toast.innerHTML = `
        <div class="card-use-toast-icon">${cardIcons[card.type] || 'üé¥'}</div>
        <div class="card-use-toast-title">${card.name}</div>
        <div class="badge badge-rarity-${card.rarity.toLowerCase()}">${card.rarity}</div>
        <div class="card-use-toast-message">„Ç´„Éº„Éâ„Çí‰ΩøÁî®„Åó„Åæ„Åó„Åü</div>
      `;
      document.body.appendChild(toast);

      // 1.5ÁßíÂæå„Å´„Éï„Çß„Éº„Éâ„Ç¢„Ç¶„Éà
      setTimeout(() => {
        toast.classList.add('fade-out');
        overlay.classList.add('fade-out');

        // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÂÆå‰∫ÜÂæå„Å´ÂâäÈô§
        setTimeout(() => {
          document.body.removeChild(toast);
          document.body.removeChild(overlay);
        }, 300);
      }, 1500);
    }

    // „Çπ„Éó„É©„ÉÉ„Ç∑„É•ÈáëÈ°çË®≠ÂÆö
    const splashAmounts = [100, 200, 500, 1000, 2000, 5000, 10000, 20000, 30000, 40000, 50000];
    let selectedSplashAmount = 100;

    // ÈáëÈ°ç„Åã„ÇâËâ≤„ÅÆ„ÉÜ„Ç£„Ç¢„ÇíË®àÁÆó
    function getAmountTier(amount) {
      if (amount < 500) return 1;
      if (amount < 2000) return 2;
      if (amount < 5000) return 3;
      if (amount < 10000) return 4;
      if (amount < 30000) return 5;
      return 6;
    }

    // „Çπ„É©„Ç§„ÉÄ„Éº„Åã„Çâ„ÉÜ„Ç£„Ç¢„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ„ÇíÂèñÂæó
    function getSliderIndexForAmount(amount) {
      for (let i = splashAmounts.length - 1; i >= 0; i--) {
        if (amount >= splashAmounts[i]) {
          return i;
        }
      }
      return 0;
    }

    // ÈáëÈ°ç„Å´Âøú„Åò„Åü„É°„ÉÉ„Çª„Éº„Ç∏ÊñáÂ≠óÊï∞Âà∂Èôê„ÇíÂèñÂæó
    function getMessageMaxLength(amount) {
      if (amount <= 100) return 0; // „É°„ÉÉ„Çª„Éº„Ç∏‰∏çÂèØ
      if (amount < 1000) return 50;
      if (amount < 5000) return 100;
      if (amount < 20000) return 150;
      return 200;
    }

    // „Éó„É¨„Éì„É•„ÉºÊõ¥Êñ∞
    function updatePreview(amount) {
      selectedSplashAmount = amount;
      const tier = getAmountTier(amount);
      const maxLength = getMessageMaxLength(amount);

      const preview = document.getElementById('splashPreview');
      const amountDisplay = document.getElementById('splashPreviewAmount');
      const messageInput = document.getElementById('splashMessage');

      preview.setAttribute('data-tier', tier);
      amountDisplay.textContent = `${amount.toLocaleString()}„Çπ„Éë„Éº„ÇØ`;

      // „É°„ÉÉ„Çª„Éº„Ç∏ÂÖ•Âäõ„ÅÆÂà∂Âæ°
      if (amount <= 100) {
        messageInput.disabled = true;
        messageInput.value = '';
        messageInput.placeholder = '„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÈÄÅ„Çã„Å´„ÅØ200„Çπ„Éë„Éº„ÇØ‰ª•‰∏äÂøÖË¶Å„Åß„Åô';
        messageInput.maxLength = 0;
      } else {
        messageInput.disabled = false;
        messageInput.placeholder = `„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ...ÔºàÊúÄÂ§ß${maxLength}ÊñáÂ≠óÔºâ`;
        messageInput.maxLength = maxLength;

        // Êó¢Â≠ò„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏„ÅåÊñ∞„Åó„ÅÑÂà∂Èôê„ÇíË∂Ö„Åà„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØÂàá„ÇäË©∞„ÇÅ„Çã
        if (messageInput.value.length > maxLength) {
          messageInput.value = messageInput.value.substring(0, maxLength);
        }
      }
    }

    // „Çπ„É©„Ç§„ÉÄ„Éº„Åã„ÇâÊõ¥Êñ∞
    function updateFromSlider(sliderValue) {
      const index = parseInt(sliderValue);
      const amount = splashAmounts[index];

      document.getElementById('splashAmountInput').value = amount;
      updatePreview(amount);
    }

    // ÂÖ•ÂäõÊ¨Ñ„Åã„ÇâÊõ¥Êñ∞
    function updateFromInput() {
      const input = document.getElementById('splashAmountInput');
      let amount = parseInt(input.value) || 100;

      // ÁØÑÂõ≤„ÉÅ„Çß„ÉÉ„ÇØ
      if (amount < 100) amount = 100;
      if (amount > 50000) amount = 50000;

      input.value = amount;

      // „Çπ„É©„Ç§„ÉÄ„Éº„ÅÆ‰ΩçÁΩÆ„ÇíÊõ¥Êñ∞
      const sliderIndex = getSliderIndexForAmount(amount);
      document.getElementById('splashSlider').value = sliderIndex;

      updatePreview(amount);
    }

    // „Ç≠„Éº„Éú„Éº„Éâ„ÅÆÂ∑¶Âè≥Áü¢Âç∞„Ç≠„Éº„ÅßÈáëÈ°çÂ§âÊõ¥
    function handleSparkKeydown(event) {
      const input = document.getElementById('splashAmountInput');
      let amount = parseInt(input.value) || 100;

      if (event.key === 'ArrowLeft') {
        // Â∑¶Áü¢Âç∞: -100
        event.preventDefault();
        amount = Math.max(100, amount - 100);
        input.value = amount;
        updateFromInput();
      } else if (event.key === 'ArrowRight') {
        // Âè≥Áü¢Âç∞: +100
        event.preventDefault();
        amount = Math.min(50000, amount + 100);
        input.value = amount;
        updateFromInput();
      }
    }

    function sendSplash() {
      const message = document.getElementById('splashMessage').value;

      // ÂÆüÈöõ„ÅÆ„Ç¢„Éó„É™„Åß„ÅØÊ±∫Ê∏àÂá¶ÁêÜ„ÇíÂÆüË£Ö
      alert(`${selectedSplashAmount.toLocaleString()}„Çπ„Éë„Éº„ÇØ „ÅÆ„Çπ„Éó„É©„ÉÉ„Ç∑„É•„ÇíÈÄÅ‰ø°„Åó„Åæ„Åó„ÅüÔºÅ\n„É°„ÉÉ„Çª„Éº„Ç∏: ${message || '„Å™„Åó'}`);

      // „É™„Çª„ÉÉ„Éà
      document.getElementById('splashMessage').value = '';
      document.getElementById('splashAmountInput').value = '100';
      document.getElementById('splashSlider').value = '0';
      updatePreview(100);
    }

    // „Çø„ÉñÂàá„ÇäÊõø„Åà
    function switchActionTab(tab) {
      // „Çø„Éñ„Éú„Çø„É≥„ÅÆÁä∂ÊÖã„ÇíÊõ¥Êñ∞
      document.querySelectorAll('.action-tab').forEach(btn => {
        btn.classList.remove('active');
      });
      event.currentTarget.classList.add('active');

      // „Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅÆË°®Á§∫„ÇíÂàá„ÇäÊõø„Åà
      document.querySelectorAll('.action-content').forEach(content => {
        content.classList.remove('active');
      });

      if (tab === 'overview') {
        document.getElementById('overviewContent').classList.add('active');
      } else if (tab === 'cards') {
        document.getElementById('cardsContent').classList.add('active');
      } else if (tab === 'splash') {
        document.getElementById('splashContent').classList.add('active');
      } else if (tab === 'packs') {
        document.getElementById('packsContent').classList.add('active');
      }
    }

    // „Éë„ÉÉ„ÇØ„ÇíË°®Á§∫
    function renderPacks() {
      const grid = document.getElementById('packsGrid');

      if (creatorPacks.length === 0) {
        grid.innerHTML = `
          <div style="text-align: center; padding: 3rem; color: #9ca3af;">
            üì¶ „Éë„ÉÉ„ÇØ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì
          </div>
        `;
        return;
      }

      grid.innerHTML = creatorPacks.map(pack => `
        <div class="pack-card" onclick="viewPack(${pack.id})">
          <div class="pack-image">üì¶</div>
          <div class="pack-content">
            <div class="pack-name">${pack.name}</div>
            <p class="pack-description">${pack.description}</p>
            <div class="pack-footer">
              <div class="pack-price">¬•${pack.price.toLocaleString()}</div>
              <button type="button" class="buy-button" onclick="event.stopPropagation(); purchasePack(${pack.id})">
                Ë≥ºÂÖ•„Åô„Çã
              </button>
            </div>
          </div>
        </div>
      `).join('');
    }

    function viewPack(packId) {
      window.location.href = `../packs/pack-detail.html?id=${packId}`;
    }

    function purchasePack(packId) {
      // ÂÆüÈöõ„ÅÆ„Ç¢„Éó„É™„Åß„ÅØÊ±∫Ê∏àÂá¶ÁêÜ„ÇíÂÆüË£Ö
      if (confirm('„Åì„ÅÆ„Éë„ÉÉ„ÇØ„ÇíË≥ºÂÖ•„Åó„Åæ„Åô„ÅãÔºü')) {
        alert('Ë≥ºÂÖ•Âá¶ÁêÜ„ÇíÈñãÂßã„Åó„Åæ„Åô...');
        // Ë≥ºÂÖ•Âæå„ÅØpack-open.html„Å∏ÈÅ∑Áßª
        setTimeout(() => {
          window.location.href = `../packs/pack-open.html?id=${packId}`;
        }, 1000);
      }
    }

    // „É¢„Éê„Ç§„É´„É°„Éã„É•„Éº„ÅÆÈñãÈñâ
    function toggleMobileMenu() {
      const sidebar = document.getElementById('sidebar');
      const button = document.getElementById('mobileMenuButton');
      const overlay = document.getElementById('mobileMenuOverlay');

      const isOpen = sidebar.classList.contains('mobile-open');

      if (isOpen) {
        closeMobileMenu();
      } else {
        openMobileMenu();
      }
    }

    function openMobileMenu() {
      const sidebar = document.getElementById('sidebar');
      const button = document.getElementById('mobileMenuButton');
      const overlay = document.getElementById('mobileMenuOverlay');

      sidebar.classList.add('mobile-open');
      button.classList.add('active');
      overlay.style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    function closeMobileMenu() {
      const sidebar = document.getElementById('sidebar');
      const button = document.getElementById('mobileMenuButton');
      const overlay = document.getElementById('mobileMenuOverlay');

      sidebar.classList.remove('mobile-open');
      button.classList.remove('active');
      overlay.style.display = 'none';
      document.body.style.overflow = '';
    }

    // „Çµ„É≥„Éó„É´„Ç´„Éº„Éâ„ÇíËøΩÂä†
    function addSampleCards() {
      const inventory = loadFromStorage('inventory', []);

      // Êó¢„Å´tanaka„ÅÆ„Ç´„Éº„Éâ„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„Çπ„Ç≠„ÉÉ„Éó
      const hasTanakaCards = inventory.some(card => card.creatorSlug === 'tanaka');
      if (hasTanakaCards) {
        return;
      }

      // „Çµ„É≥„Éó„É´„Ç´„Éº„Éâ„ÇíËøΩÂä†
      const sampleCards = [
        {
          id: 1,
          name: '„Åì„Çì„Å´„Å°„ÅØ',
          rarity: 'N',
          type: 'message',
          creatorName: 'Áî∞‰∏≠Â§™ÈÉé',
          creatorSlug: 'tanaka',
          isUsed: false,
          acquiredAt: new Date().toISOString()
        },
        {
          id: 2,
          name: '„ÅÑ„ÅÑ„Å≠ÔºÅ',
          rarity: 'R',
          type: 'action',
          creatorName: 'Áî∞‰∏≠Â§™ÈÉé',
          creatorSlug: 'tanaka',
          isUsed: false,
          acquiredAt: new Date().toISOString()
        },
        {
          id: 3,
          name: '„Åç„Çâ„Åç„Çâ',
          rarity: 'SR',
          type: 'visual',
          creatorName: 'Áî∞‰∏≠Â§™ÈÉé',
          creatorSlug: 'tanaka',
          isUsed: false,
          acquiredAt: new Date().toISOString()
        },
        {
          id: 5,
          name: '„ÅÇ„Çä„Åå„Å®„ÅÜ',
          rarity: 'R',
          type: 'message',
          creatorName: 'Áî∞‰∏≠Â§™ÈÉé',
          creatorSlug: 'tanaka',
          isUsed: false,
          acquiredAt: new Date().toISOString()
        },
        {
          id: 4,
          name: 'ÊøÄ„É¨„Ç¢„Ç´„Éº„Éâ',
          rarity: 'UR',
          type: 'action',
          creatorName: 'Áî∞‰∏≠Â§™ÈÉé',
          creatorSlug: 'tanaka',
          isUsed: false,
          acquiredAt: new Date().toISOString()
        }
      ];

      inventory.push(...sampleCards);
      saveToStorage('inventory', inventory);
    }

    // ÂàùÊúüÂåñ
    function init() {
      addSampleCards(); // „Çµ„É≥„Éó„É´„Ç´„Éº„Éâ„ÇíËøΩÂä†
      initFollowButton();
      updateFollowerCount();
      setupStreamPlayer();
      renderCards();
      renderPacks();

      // „Çπ„Éó„É©„ÉÉ„Ç∑„É•„Éó„É¨„Éì„É•„Éº„Å´Ë¶ñËÅ¥ËÄÖÔºà„É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„ÉºÔºâÊÉÖÂ†±„ÇíË®≠ÂÆö
      const session = getCurrentSession();
      if (session && session.displayName) {
        document.getElementById('splashPreviewAvatar').textContent = session.displayName.charAt(0);
        document.getElementById('splashPreviewName').textContent = session.displayName;
      } else {
        // „É≠„Ç∞„Ç§„É≥„Åó„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà„ÅÆ„Éá„Éï„Ç©„É´„Éà
        document.getElementById('splashPreviewAvatar').textContent = '„ÅÇ';
        document.getElementById('splashPreviewName').textContent = '„ÅÇ„Å™„Åü';
      }
    }

    // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´ÂàùÊúüÂåñ
    init();
  </script>

  <!-- „Éï„Ç©„É≠„ÉºËß£Èô§Á¢∫Ë™ç„É¢„Éº„ÉÄ„É´ -->
  <div class="confirm-modal" id="unfollowModal">
    <div class="confirm-modal-content">
      <div class="confirm-modal-title">„Éï„Ç©„É≠„ÉºËß£Èô§„ÅÆÁ¢∫Ë™ç</div>
      <div class="confirm-modal-message" id="unfollowModalMessage"></div>
      <div class="confirm-modal-buttons">
        <button type="button" class="confirm-modal-button confirm-modal-button-cancel" onclick="closeUnfollowModal()">„Ç≠„É£„É≥„Çª„É´</button>
        <button type="button" class="confirm-modal-button confirm-modal-button-confirm" id="unfollowConfirmButton">Ëß£Èô§„Åô„Çã</button>
      </div>
    </div>
  </div>

  <!-- „Ç´„Éº„Éâ‰ΩøÁî®Á¢∫Ë™ç„É¢„Éº„ÉÄ„É´ -->
  <div class="use-card-modal" id="useCardModal">
    <div class="use-card-modal-content">
      <div class="use-card-modal-header">
        <div class="use-card-modal-icon" id="useCardModalIcon">üé¥</div>
        <div class="use-card-modal-title" id="useCardModalTitle">„Ç´„Éº„Éâ„Çí‰ΩøÁî®</div>
        <div class="badge" id="useCardModalBadge"></div>
      </div>
      <div class="use-card-modal-message" id="useCardModalMessage">
        „Åì„ÅÆ„Ç´„Éº„Éâ„Çí‰ΩøÁî®„Åó„Åæ„Åô„ÅãÔºü
      </div>
      <div class="use-card-modal-buttons">
        <button type="button" class="use-card-modal-button use-card-modal-button-cancel" onclick="closeUseCardModal()">„Ç≠„É£„É≥„Çª„É´</button>
        <button type="button" class="use-card-modal-button use-card-modal-button-confirm" id="useCardConfirmButton">‰ΩøÁî®„Åô„Çã</button>
      </div>
    </div>
  </div>
</body>
</html>
