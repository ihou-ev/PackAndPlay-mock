# Pack&Play モックアップ

**Pack&Play 引いて、使って、配信が動く。**

**Pack&Play** の完全な静的HTMLモックアップです。データベースやサーバーは不要で、ブラウザだけで動作します。

## 📦 概要

**応援が"演出"になるカードパック。**

Pack&Playは、VTuber/配信者向けのカードパック販売プラットフォームです。配信者が作ったカード入りの"パック"を視聴者が購入して開封し、当たったカードを使うと配信画面でエフェクトが出たり、配信者にお題・リクエストが届くサービスです。スパチャのように応援しつつ、"参加して一緒に遊ぶ"体験を作れます。

**PWA対応**: このアプリはProgressive Web Appとして動作し、ホーム画面にインストール可能で、オフラインでも動作します。

## 🚀 使い方

### 起動方法

1. このディレクトリをWebサーバーで開くか、`index.html`をブラウザで直接開いてください

```bash
# Python 3を使う場合
python -m http.server 8000

# Node.jsのhttp-serverを使う場合
npx http-server -p 8000
```

2. ブラウザで `http://localhost:8000` を開く

### 簡易起動（ファイル直接開く）

Webサーバーがない場合は、`index.html`をブラウザにドラッグ&ドロップするだけでも動作します。

## 📂 ファイル構造

```
/
├── index.html                    # ランディングページ（エントリーポイント）
│                                  # - ヒーローセクション（キャッチコピー）
│                                  # - 説明セクション（30秒説明）
│                                  # - ログインセクション（ロール選択 + ソーシャルログイン）
├── discover.html                 # 配信者発見ページ
├── inventory.html                # マイカード（インベントリ）
├── manifest.json                 # PWAマニフェスト
├── sw.js                         # Service Worker
├── auth/
│   └── login.html                # レガシーログイン画面
├── css/
│   └── style.css                 # 共通スタイル
├── js/
│   ├── mock-data.js              # モックデータ
│   └── main.js                   # 共通JavaScript機能（セッション管理含む）
├── creator/
│   ├── tanaka.html               # 配信者ページ（田中太郎）
│   └── packs/
│       ├── pack-detail.html      # パック詳細
│       └── pack-open.html        # パック開封
├── dashboard/
│   ├── index.html                # ダッシュボード
│   ├── cards.html                # カードライブラリ管理
│   ├── packs.html                # パック管理
│   └── redemptions.html          # 承認待ちキュー
├── overlay/
│   └── index.html                # OBSオーバーレイ
└── assets/
    └── images/                   # 画像ファイル
```

## 🎯 主要機能

### PWA機能

1. **インストール可能**
   - ホーム画面やデスクトップに追加
   - スタンドアロンアプリとして起動

2. **オフライン対応**
   - Service Workerによるキャッシング
   - ネットワーク優先、フォールバックでキャッシュ
   - コアページとアセットがオフラインで利用可能

3. **アプリショートカット**
   - 配信者を探す
   - マイカード
   - ダッシュボード（配信者向け）

### 認証機能

1. **ソーシャルログイン** (`index.html` - エントリーポイント)
   - 視聴者/配信者ロール選択
   - YouTubeでログイン（視聴者・配信者共通）
   - Twitchでログイン（視聴者・配信者共通）
   - Xでログイン（視聴者のみ）
   - セッション管理（localStorage）

**ログイン方法：**
- **視聴者としてログイン**: カードの購入・使用が可能
  - YouTube、Twitch、Xのいずれかでログイン
- **配信者としてログイン**: ダッシュボード、カード管理、承認キューへアクセス可能
  - YouTube、Twitchのいずれかでログイン（Xは非対応）

### 視聴者向け機能

1. **配信者発見** (`discover.html`)
   - 配信者の一覧表示
   - 配信中バッジ表示
   - 検索機能

2. **配信者ページ** (`creator/tanaka.html`)
   - パック一覧
   - 購入ボタン

3. **パック詳細** (`creator/packs/pack-detail.html`)
   - 排出率表示（景表法対応）
   - カード一覧
   - 購入機能

4. **パック開封** (`creator/packs/pack-open.html`)
   - アニメーション付き開封演出
   - カード獲得

5. **インベントリ** (`inventory.html`)
   - 所持カード一覧
   - フィルター機能
   - カード使用

### 配信者向け機能

1. **ダッシュボード** (`dashboard/index.html`)
   - 統計情報
   - 配信ステータス切替
   - OBSオーバーレイURL

2. **カードライブラリ** (`dashboard/cards.html`)
   - カード作成・編集・削除
   - レアリティ・タイプ設定

3. **パック管理** (`dashboard/packs.html`)
   - パック作成
   - 公開/非公開切替

4. **承認待ちキュー** (`dashboard/redemptions.html`)
   - カード使用の承認・却下
   - リアルタイム更新（シミュレート）

5. **OBSオーバーレイ** (`overlay/index.html`)
   - カードエフェクト表示
   - パーティクルアニメーション
   - 透明背景（OBS対応）

## 💾 データ永続化

このモックアップは `localStorage` を使用してデータを保存します：

- `session`: ログインセッション情報（ロール、ユーザー情報）
- `inventory`: ユーザーの所持カード
- `creatorCards`: 配信者のカードライブラリ
- `creatorPacks`: 配信者のパック
- `redemptions`: 承認待ちキュー

ブラウザのキャッシュをクリアするとデータがリセットされます。

### セッション情報の構造

```javascript
{
  isLoggedIn: true,
  role: 'viewer' | 'creator',
  email: 'demo@packandplay.com',
  name: '表示名',
  creatorSlug: 'tanaka', // 配信者の場合のみ
  loginTime: '2025-11-04T12:00:00Z'
}
```

## 🎨 デザインシステム

### カラーパレット

- **Primary**: `#d946a6` (マゼンタピンク)
- **Secondary**: `#818cf8` (インディゴ)
- **Accent**: `#fbbf24` (ゴールド)

### レアリティカラー

- **N (ノーマル)**: `#9ca3af` (グレー)
- **R (レア)**: `#3b82f6` (ブルー)
- **SR (スーパーレア)**: `#8b5cf6` (パープル)
- **UR (ウルトラレア)**: `#f59e0b` (ゴールド)

## 🧪 テスト機能

### OBSオーバーレイのテスト

`overlay/index.html` には右上にテストボタンがあります：

- **アクション (N)**: アクションカードをテスト
- **ビジュアル (SR)**: ビジュアルカードをテスト
- **メッセージ (UR)**: メッセージカードをテスト

### パック開封のテスト

パック詳細ページから「購入する」→ 開封画面でランダムにカードが表示されます。

## 🔧 カスタマイズ

### モックデータの変更

`js/mock-data.js` を編集して、配信者やパック、カードのデータを変更できます。

### スタイルの変更

`css/style.css` の `:root` セクションでカラーやスペーシングを変更できます。

## 📝 注意事項

このモックアップは**デモンストレーション目的**です：

- 実際の決済機能はありません
- データベース接続はありません
- 認証機能はありません
- Stripe/Supabaseとの統合はありません

本番環境では、Paketore-new（Next.js + Supabase + Stripe）を使用してください。

## 📄 ライセンス

このモックアップは学習・デモンストレーション目的で作成されています。

---

## 🎮 使い方の例

### PWAとしてインストール

1. **デスクトップ（Chrome/Edge）**:
   - ブラウザのアドレスバー右側の「インストール」アイコンをクリック
   - または、メニュー → 「Pack&Playをインストール」

2. **モバイル（iOS Safari）**:
   - 共有ボタン → 「ホーム画面に追加」

3. **モバイル（Android Chrome）**:
   - メニュー → 「ホーム画面に追加」

### 視聴者フロー

1. **ランディングページ**: `index.html` を開く
2. **即ログイン（推奨）**: 「👤 視聴者として始める」をクリック → YouTubeで自動ログイン
3. **または詳細確認後にログイン**: 「もっと詳しく」でスクロール → 下部のYouTube/Twitch/Xボタンからログイン
4. **配信者発見**: `discover.html` で配信者を探す
5. **パック購入**: 配信者ページでパックを選択 → 詳細確認 → 購入
6. **パック開封**: 開封画面でタップして開封
7. **カード使用**: インベントリからカードを選択 → 使用

### 配信者フロー

1. **ランディングページ**: `index.html` を開く
2. **即ログイン（推奨）**: 「🎬 配信者として始める」をクリック → YouTubeで自動ログイン
3. **または詳細確認後にログイン**: 「もっと詳しく」でスクロール → 下部のYouTube/Twitchボタンからログイン
4. **ダッシュボード**: 統計情報を確認、配信ステータスを切替
5. **カード作成**: カードライブラリでカードを作成
6. **パック作成**: パック管理でパックを作成し、カードを追加
7. **承認**: 承認待ちキューでカード使用を承認
8. **OBS確認**: オーバーレイページでエフェクトを確認

### ロール切替

ナビゲーションバーの「ログアウト」ボタンでログアウトすると、トップページ（`index.html`）に戻り、別のロールで再ログインできます。

楽しんでください！ 🎴✨
