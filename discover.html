<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#667eea">
  <meta name="description" content="ÈÖç‰ø°ËÄÖÂ∞ÇÁî®„Ç´„Éº„Éâ„Éë„ÉÉ„ÇØË≤©Â£≤„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Pack&Play">
  <title>Pack&Play - ÈÖç‰ø°ËÄÖ„ÇíÊé¢„Åô</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" sizes="192x192" href="assets/images/icon-192.png">
  <link rel="apple-touch-icon" href="assets/images/icon-192.png">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
      overflow-x: hidden;
      width: 100%;
    }

    body {
      display: flex;
      background: #f9fafb;
    }

    /* „Çµ„Ç§„Éâ„Éê„Éº */
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      width: 260px;
      background: white;
      border-right: 1px solid #e5e7eb;
      padding: 2rem 1.5rem 1rem;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      z-index: 1000;
    }

    .sidebar-logo {
      display: block;
      text-decoration: none;
      margin-bottom: 2rem;
      transition: opacity 0.2s;
    }

    .sidebar-logo:hover {
      opacity: 0.8;
    }

    .sidebar-logo-img {
      width: 100%;
      max-width: 180px;
      height: auto;
      display: block;
    }

    .sidebar-nav {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      flex: 1;
    }

    .sidebar-nav-link {
      color: #2d1b3d;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.125rem;
      padding: 1rem 1.25rem;
      border-radius: 0.75rem;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .sidebar-nav-link:hover {
      background: #f3f4f6;
    }

    .sidebar-nav-link.active {
      background: #f3f4f6;
      color: #FF1B8D;
    }

    /* „Çµ„Ç§„Éâ„Éê„Éº„Éï„ÉÉ„Çø„Éº */
    .sidebar-footer {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid #e5e7eb;
    }

    .sidebar-footer-links {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }

    .sidebar-footer-link {
      color: #6b7280;
      text-decoration: none;
      font-size: 0.8125rem;
      transition: color 0.2s;
    }

    .sidebar-footer-link:hover {
      color: #2d1b3d;
      text-decoration: underline;
    }

    .sidebar-footer-copyright {
      color: #9ca3af;
      font-size: 0.75rem;
      line-height: 1.4;
    }

    /* „É°„Ç§„É≥„É©„ÉÉ„Éë„Éº */
    .main-wrapper {
      margin-left: 260px;
      flex: 1;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      width: calc(100% - 260px);
      overflow-x: hidden;
    }

    /* ÈÖç‰ø°ËÄÖ„ÇíÊé¢„Åô„Ç≥„É≥„ÉÜ„É≥„ÉÑ */
    .discover-content {
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
      padding: 2rem;
    }

    .discover-header {
      margin-bottom: 2rem;
    }

    .discover-title {
      font-size: 1.875rem;
      font-weight: 800;
      color: #2d1b3d;
      margin-bottom: 0.5rem;
    }

    .discover-description {
      color: #6b7280;
      font-size: 0.9375rem;
    }

    /* Ê§úÁ¥¢„Å®„Éï„Ç£„É´„Çø„Éº */
    .search-filter-section {
      background: white;
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      width: 100%;
    }

    .search-box {
      position: relative;
      margin-bottom: 1rem;
      width: 100%;
    }

    .search-input {
      width: 100%;
      padding: 0.875rem 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 0.75rem;
      font-size: 0.9375rem;
      transition: all 0.2s;
      box-sizing: border-box;
    }

    .search-input:focus {
      outline: none;
      border-color: #FF1B8D;
      box-shadow: 0 0 0 3px rgba(255, 27, 141, 0.1);
    }

    .filter-buttons {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 0.625rem 1.25rem;
      border: 2px solid #e5e7eb;
      border-radius: 0.75rem;
      background: white;
      font-weight: 600;
      font-size: 0.875rem;
      cursor: pointer;
      transition: all 0.2s;
      color: #6b7280;
    }

    .filter-btn:hover {
      border-color: #FF1B8D;
      color: #FF1B8D;
    }

    .filter-btn.active {
      background: #FF1B8D;
      color: white;
      border-color: #FF1B8D;
    }

    /* ÈÖç‰ø°ËÄÖ„É™„Çπ„Éà */
    .creators-list {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.25rem;
      width: 100%;
    }

    /* ÈÖç‰ø°ËÄÖ„Ç´„Éº„Éâ */
    .creator-card {
      background: white;
      border-radius: 1rem;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      transition: all 0.2s;
      display: flex;
      flex-direction: column;
      cursor: pointer;
      position: relative;
    }

    .creator-card:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }

    .creator-card-banner {
      width: 100%;
      height: 120px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      position: relative;
    }

    .creator-card-avatar-wrapper {
      position: absolute;
      bottom: -30px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 2;
    }

    .creator-card-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 1.5rem;
      border: 3px solid white;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      position: relative;
    }

    .creator-card-avatar .live-signal {
      position: absolute;
      top: -2px;
      right: -2px;
      width: 16px;
      height: 16px;
      background: #22c55e;
      border-radius: 50%;
      border: 2px solid white;
      animation: pulse-signal 2s ease-in-out infinite;
    }

    @keyframes pulse-signal {
      0%, 100% {
        opacity: 1;
        transform: scale(1);
      }
      50% {
        opacity: 0.8;
        transform: scale(1.1);
      }
    }

    .creator-card-body {
      padding: 2.5rem 1rem 0.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .creator-card-name {
      font-size: 1rem;
      font-weight: 700;
      color: #2d1b3d;
      margin-bottom: 0.25rem;
      word-break: break-word;
    }

    .creator-card-id {
      font-size: 0.75rem;
      color: #9ca3af;
      margin-bottom: 0.5rem;
    }

    .creator-card-stats {
      font-size: 0.8125rem;
      color: #6b7280;
      margin-bottom: 1rem;
      min-height: 1.25rem;
    }

    .creator-card-follow-btn {
      width: calc(100% - 2rem);
      margin: 0 1rem 1rem;
      padding: 0.625rem 1rem;
      border-radius: 0.5rem;
      border: 2px solid #e5e7eb;
      background: white;
      color: #2d1b3d;
      font-weight: 600;
      font-size: 0.875rem;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
      z-index: 2;
    }

    .creator-card-follow-btn:hover {
      border-color: #FF1B8D;
      color: #FF1B8D;
    }

    .creator-card-follow-btn.following {
      background: #FF1B8D;
      color: white;
      border-color: #FF1B8D;
    }

    .creator-card-follow-btn.following:hover {
      background: #e01677;
      border-color: #e01677;
    }

    .creator-card-link {
      text-decoration: none;
      color: inherit;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 1;
    }

    /* „É©„É≥„Ç≠„É≥„Ç∞Áï™Âè∑Ôºà„Ç´„Éº„ÉâÁâàÔºâ */
    .creator-card.ranking-card {
      position: relative;
    }

    .ranking-badge {
      position: absolute;
      top: 0.75rem;
      left: 0.75rem;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: #6b7280;
      color: white;
      font-weight: 700;
      font-size: 0.875rem;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }

    .ranking-badge.gold {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
    }

    .ranking-badge.silver {
      background: linear-gradient(135deg, #d1d5db 0%, #9ca3af 100%);
    }

    .ranking-badge.bronze {
      background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
    }

    .sparks-consumed {
      color: #FF1B8D;
      font-weight: 600;
      font-size: 0.875rem;
    }

    /* Á©∫„ÅÆÁä∂ÊÖã */
    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
      color: #9ca3af;
      background: white;
      border-radius: 1rem;
    }

    .empty-state-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .empty-state-text {
      font-size: 0.9375rem;
    }

    .hidden {
      display: none;
    }

    /* „É¢„Éê„Ç§„É´„É°„Éã„É•„Éº„Éú„Çø„É≥„Å®„Ç™„Éº„Éê„Éº„É¨„Ç§„ÅØ css/style.css „ÅßÂÆöÁæ© */

    .sidebar.mobile-active {
      transform: translateX(0);
    }

    /* „É¢„Éê„Ç§„É´ÂØæÂøú */
    @media (max-width: 768px) {
      body {
        display: block;
      }

      .mobile-menu-button {
        display: flex;
      }

      .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s;
      }

      .main-wrapper {
        margin-left: 0;
        width: 100%;
      }

      .discover-content {
        padding: 1rem;
        padding-top: 3.5rem;
        max-width: 100%;
      }

      .discover-title {
        font-size: 1.5rem;
      }

      .discover-description {
        font-size: 0.875rem;
      }

      .search-filter-section {
        padding: 1rem;
        width: 100%;
        box-sizing: border-box;
      }

      .search-box {
        width: 100%;
      }

      .search-input {
        width: 100%;
        box-sizing: border-box;
      }

      .creators-list {
        width: 100%;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.875rem;
      }

      .creator-card-banner {
        height: 80px;
      }

      .creator-card-avatar-wrapper {
        bottom: -25px;
      }

      .creator-card-avatar {
        width: 50px;
        height: 50px;
        font-size: 1.25rem;
      }

      .creator-card-avatar .live-signal {
        width: 14px;
        height: 14px;
      }

      .creator-card-body {
        padding: 2rem 0.75rem 0.75rem;
      }

      .creator-card-name {
        font-size: 0.875rem;
      }

      .creator-card-id {
        font-size: 0.6875rem;
      }

      .creator-card-stats {
        font-size: 0.75rem;
        margin-bottom: 0.75rem;
      }

      .creator-card-follow-btn {
        font-size: 0.75rem;
        padding: 0.5rem 0.75rem;
        width: calc(100% - 1.5rem);
        margin: 0 0.75rem 0.75rem;
      }

      .ranking-badge {
        width: 30px;
        height: 30px;
        font-size: 0.75rem;
        top: 0.5rem;
        left: 0.5rem;
      }

      .sparks-consumed {
        font-size: 0.75rem;
      }
    }
  </style>
</head>
<body>
  <!-- „É¢„Éê„Ç§„É´„É°„Éã„É•„Éº„Éú„Çø„É≥ -->
  <button class="mobile-menu-button" id="mobileMenuButton" onclick="toggleMobileMenu()">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7"></path>
    </svg>
  </button>

  <!-- „É¢„Éê„Ç§„É´„É°„Éã„É•„Éº„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
  <div class="mobile-menu-overlay" id="mobileMenuOverlay" onclick="closeMobileMenu()"></div>

  <!-- „Çµ„Ç§„Éâ„Éê„Éº -->
  <aside class="sidebar" id="sidebar">
    <a href="profile.html" class="sidebar-logo">
      <img src="image/logo.png" alt="Pack&Play" class="sidebar-logo-img">
    </a>
    <nav class="sidebar-nav" id="sidebarNav">
      <!-- JavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
    </nav>

    <!-- „Çµ„Ç§„Éâ„Éê„Éº„Éï„ÉÉ„Çø„Éº -->
    <div class="sidebar-footer">
      <div class="sidebar-footer-links">
        <a href="legal/terms.html" class="sidebar-footer-link">Âà©Áî®Ë¶èÁ¥Ñ</a>
        <a href="legal/privacy.html" class="sidebar-footer-link">„Éó„É©„Ç§„Éê„Ç∑„Éº</a>
        <a href="legal/commerce.html" class="sidebar-footer-link">ÁâπÂïÜÊ≥ïË°®Ë®ò</a>
        <a href="legal/scta.html" class="sidebar-footer-link">Ë≥áÈáëÊ±∫Ê∏àÊ≥ï</a>
        <a href="legal/contact.html" class="sidebar-footer-link">„ÅäÂïè„ÅÑÂêà„Çè„Åõ</a>
      </div>
      <div class="sidebar-footer-copyright">
        ¬© 2025 Pack&Play
      </div>
    </div>
  </aside>

  <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
  <div class="main-wrapper">
    <div class="discover-content">
      <!-- „Éò„ÉÉ„ÉÄ„Éº -->
      <div class="discover-header">
        <h1 class="discover-title">ÈÖç‰ø°ËÄÖ„ÇíÊé¢„Åô</h1>
        <p class="discover-description">„ÅäÊ∞ó„Å´ÂÖ•„Çä„ÅÆÈÖç‰ø°ËÄÖ„ÇíË¶ã„Å§„Åë„Å¶„ÄÅ„Ç´„Éº„Éâ„Éë„ÉÉ„ÇØ„ÅßÂøúÊè¥„Åó„Çà„ÅÜ</p>
      </div>

      <!-- „Çø„ÉñUI -->
      <div class="tabs-container">
        <div class="tabs-list">
          <button class="tab-button active" id="rankingTab" onclick="switchTab('ranking')">
            „É©„É≥„Ç≠„É≥„Ç∞
          </button>
          <button class="tab-button" id="allListTab" onclick="switchTab('allList')">
            ÂÖ®‰Ωì„ÅÆ‰∏ÄË¶ß
          </button>
        </div>
      </div>

      <!-- „É©„É≥„Ç≠„É≥„Ç∞„Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
      <div class="tab-content active" id="rankingContent">
        <!-- ÊúüÈñì„Éï„Ç£„É´„Çø„Éº -->
        <div class="filter-select-container">
          <select id="periodSelect" class="filter-select" onchange="filterByPeriod()">
            <option value="today">24ÊôÇÈñì</option>
            <option value="week">‰ªäÈÄ±</option>
            <option value="month">‰ªäÊúà</option>
            <option value="year">‰ªäÂπ¥</option>
          </select>
        </div>

        <!-- „É©„É≥„Ç≠„É≥„Ç∞„É™„Çπ„Éà -->
        <div class="creators-list" id="rankingList">
          <!-- JavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
        </div>
      </div>

      <!-- ÂÖ®‰Ωì„ÅÆ‰∏ÄË¶ß„Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
      <div class="tab-content" id="allListContent">
        <!-- Ê§úÁ¥¢„Éú„ÉÉ„ÇØ„Çπ -->
        <div class="search-box-container">
          <input
            type="search"
            id="searchInput"
            placeholder="ÈÖç‰ø°ËÄÖ„ÇíÊ§úÁ¥¢..."
            class="search-input"
          >
        </div>

        <!-- „ÇΩ„Éº„Éà„Éï„Ç£„É´„Çø„Éº -->
        <div class="filter-select-container">
          <select id="sortSelect" class="filter-select" onchange="sortCreators()">
            <option value="followers">„Éï„Ç©„É≠„ÉØ„ÉºÊï∞È†Ü</option>
            <option value="name">ÂêçÂâçÈ†Ü</option>
            <option value="live">ÈÖç‰ø°‰∏≠</option>
          </select>
        </div>

        <!-- ÈÖç‰ø°ËÄÖ„É™„Çπ„Éà -->
        <div class="creators-list" id="creatorsList">
          <!-- JavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
        </div>

        <div id="emptyState" class="empty-state hidden">
          <div class="empty-state-icon">üîç</div>
          <div class="empty-state-text">ÈÖç‰ø°ËÄÖ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü</div>
        </div>
      </div>
    </div>
  </div>

  <!-- „Éï„Ç©„É≠„ÉºËß£Èô§Á¢∫Ë™ç„É¢„Éº„ÉÄ„É´ -->
  <div class="confirm-modal" id="unfollowModal">
    <div class="confirm-modal-content">
      <div class="confirm-modal-title">„Éï„Ç©„É≠„ÉºËß£Èô§„ÅÆÁ¢∫Ë™ç</div>
      <div class="confirm-modal-message" id="unfollowModalMessage"></div>
      <div class="confirm-modal-buttons">
        <button class="confirm-modal-button confirm-modal-button-cancel" onclick="closeUnfollowModal()">„Ç≠„É£„É≥„Çª„É´</button>
        <button class="confirm-modal-button confirm-modal-button-confirm" id="unfollowConfirmButton">Ëß£Èô§„Åô„Çã</button>
      </div>
    </div>
  </div>

  <script src="js/mock-data.js"></script>
  <script src="js/main.js"></script>
  <script>
    // DOM„ÅåË™≠„ÅøËæº„Åæ„Çå„Å¶„Åã„ÇâÂÆüË°å
    document.addEventListener('DOMContentLoaded', function() {
      // „Çµ„Ç§„Éâ„Éê„Éº„ÅÆ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„ÇíÁîüÊàêÔºàmain.js„ÅÆÂÖ±ÈÄöÈñ¢Êï∞„Çí‰ΩøÁî®Ôºâ
      renderSidebarNav('discover');

      // Áä∂ÊÖãÁÆ°ÁêÜ
      let currentTab = 'ranking';
      let currentPeriod = 'today';
      let currentSort = 'followers';
      let searchQuery = '';

      // „Çπ„Éë„Éº„ÇØÊï∞„Çí„Éï„Ç©„Éº„Éû„ÉÉ„ÉàÔºàKÂçò‰ΩçÔºâ
      function formatSparks(num) {
        if (num >= 1000) {
          const k = num / 1000;
          // Â∞èÊï∞ÁÇπ1Ê°Å„Åæ„ÅßË°®Á§∫Ôºà.0„ÅÆÂ†¥Âêà„ÅØÊï¥Êï∞Ë°®Á§∫Ôºâ
          return k % 1 === 0 ? `${k}K` : `${k.toFixed(1)}K`;
        }
        return num.toString();
      }

      // „Çø„ÉñÂàá„ÇäÊõø„Åà
      window.switchTab = function(tab) {
        currentTab = tab;

        // „Çø„Éñ„Éú„Çø„É≥„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã„ÇíÊõ¥Êñ∞
        document.getElementById('rankingTab').classList.toggle('active', tab === 'ranking');
        document.getElementById('allListTab').classList.toggle('active', tab === 'allList');

        // „Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅÆË°®Á§∫Âàá„ÇäÊõø„Åà
        document.getElementById('rankingContent').classList.toggle('active', tab === 'ranking');
        document.getElementById('allListContent').classList.toggle('active', tab === 'allList');

        // Ë°®Á§∫„ÇíÊõ¥Êñ∞
        if (tab === 'ranking') {
          renderRanking();
        } else {
          renderCreators();
        }
      };

      // ÊúüÈñì„Éï„Ç£„É´„Çø„ÉºÂàá„ÇäÊõø„ÅàÔºà„É©„É≥„Ç≠„É≥„Ç∞Áî®Ôºâ
      window.filterByPeriod = function() {
        currentPeriod = document.getElementById('periodSelect').value;
        renderRanking();
      };

      // „É©„É≥„Ç≠„É≥„Ç∞Ë°®Á§∫
      function renderRanking() {
        const list = document.getElementById('rankingList');
        const followedIds = getFollowedCreators();

        // „Çπ„Éë„Éº„ÇØÊ∂àË≤ªÈáè„Åß„ÇΩ„Éº„Éà
        let ranked = [...creators].sort((a, b) => {
          const aValue = a.sparksConsumed ? a.sparksConsumed[currentPeriod] : 0;
          const bValue = b.sparksConsumed ? b.sparksConsumed[currentPeriod] : 0;
          return bValue - aValue;
        });

        list.innerHTML = ranked.map((creator, index) => {
          const isFollowing = followedIds.includes(creator.id);
          const rank = index + 1;
          const sparks = creator.sparksConsumed ? creator.sparksConsumed[currentPeriod] : 0;
          const isTopThree = rank <= 3;

          // „É©„É≥„Ç≠„É≥„Ç∞„Éê„ÉÉ„Ç∏„ÅÆ„ÇØ„É©„Çπ„ÇíÊ±∫ÂÆö
          let badgeClass = '';
          if (rank === 1) badgeClass = ' gold';
          else if (rank === 2) badgeClass = ' silver';
          else if (rank === 3) badgeClass = ' bronze';

          return `
            <div class="creator-card ranking-card" id="ranking-creator-${creator.id}">
              <a href="creator/${creator.slug}.html" class="creator-card-link"></a>
              <div class="creator-card-banner">
                <div class="ranking-badge${badgeClass}">${rank}</div>
              </div>
              <div class="creator-card-avatar-wrapper">
                <div class="creator-card-avatar">
                  ${creator.name.charAt(0)}
                  ${creator.isLive ? '<span class="live-signal"></span>' : ''}
                </div>
              </div>
              <div class="creator-card-body">
                <div class="creator-card-name">${creator.name}</div>
                <div class="creator-card-id">@${creator.slug}</div>
                <div class="creator-card-stats">
                  <span class="sparks-consumed">${formatSparks(sparks)} „Çπ„Éë„Éº„ÇØ</span>
                </div>
              </div>
              <button class="creator-card-follow-btn${isFollowing ? ' following' : ''}" onclick="toggleFollowButton(${creator.id}, event, 'ranking')">
                ${isFollowing ? '„Éï„Ç©„É≠„Éº‰∏≠' : '„Éï„Ç©„É≠„Éº„Åô„Çã'}
              </button>
            </div>
          `;
        }).join('');
      }

      // „ÇΩ„Éº„ÉàÂ§âÊõ¥ÔºàÂÖ®‰Ωì„ÅÆ‰∏ÄË¶ßÁî®Ôºâ
      window.sortCreators = function() {
        currentSort = document.getElementById('sortSelect').value;
        renderCreators();
      };

      // ÈÖç‰ø°ËÄÖ„É™„Çπ„ÉàË°®Á§∫ÔºàÂÖ®‰Ωì„ÅÆ‰∏ÄË¶ßÔºâ
      function renderCreators() {
        const list = document.getElementById('creatorsList');
        const emptyState = document.getElementById('emptyState');
        const followedIds = getFollowedCreators();

        // „Éï„Ç£„É´„Çø„É™„É≥„Ç∞
        let filtered = [...creators];

        if (searchQuery) {
          filtered = filtered.filter(c =>
            c.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
            c.slug.toLowerCase().includes(searchQuery.toLowerCase())
          );
        }

        // „ÇΩ„Éº„Éà
        if (currentSort === 'followers') {
          filtered.sort((a, b) => (b.followerCount || 0) - (a.followerCount || 0));
        } else if (currentSort === 'name') {
          filtered.sort((a, b) => a.name.localeCompare(b.name, 'ja'));
        } else if (currentSort === 'live') {
          filtered.sort((a, b) => {
            if (a.isLive && !b.isLive) return -1;
            if (!a.isLive && b.isLive) return 1;
            return 0;
          });
        }

        if (filtered.length === 0) {
          list.innerHTML = '';
          emptyState.classList.remove('hidden');
          return;
        }

        emptyState.classList.add('hidden');

        list.innerHTML = filtered.map(creator => {
          const isFollowing = followedIds.includes(creator.id);
          return `
            <div class="creator-card" id="creator-${creator.id}">
              <a href="creator/${creator.slug}.html" class="creator-card-link"></a>
              <div class="creator-card-banner"></div>
              <div class="creator-card-avatar-wrapper">
                <div class="creator-card-avatar">
                  ${creator.name.charAt(0)}
                  ${creator.isLive ? '<span class="live-signal"></span>' : ''}
                </div>
              </div>
              <div class="creator-card-body">
                <div class="creator-card-name">${creator.name}</div>
                <div class="creator-card-id">@${creator.slug}</div>
                <div class="creator-card-stats">
                  ${(creator.followerCount || 0).toLocaleString()} „Éï„Ç©„É≠„ÉØ„Éº
                </div>
              </div>
              <button class="creator-card-follow-btn${isFollowing ? ' following' : ''}" onclick="toggleFollowButton(${creator.id}, event, 'list')">
                ${isFollowing ? '„Éï„Ç©„É≠„Éº‰∏≠' : '„Éï„Ç©„É≠„Éº„Åô„Çã'}
              </button>
            </div>
          `;
        }).join('');
      }

      // „Éï„Ç©„É≠„Éº„Éú„Çø„É≥„ÅÆ„Éà„Ç∞„É´
      window.toggleFollowButton = function(creatorId, event, source) {
        event.preventDefault();
        event.stopPropagation();

        const creator = creators.find(c => c.id === creatorId);
        const creatorName = creator ? creator.name : 'ÈÖç‰ø°ËÄÖ';
        const followedIds = getFollowedCreators();
        const isFollowing = followedIds.includes(creatorId);

        if (isFollowing) {
          // „Ç´„Çπ„Çø„É†„É¢„Éº„ÉÄ„É´„ÇíË°®Á§∫
          showUnfollowModal(creatorId, creatorName, source);
        } else {
          toggleFollow(creatorId);
          updateButtonState(creatorId, true, source);
        }
      };

      // „Éï„Ç©„É≠„ÉºËß£Èô§„É¢„Éº„ÉÄ„É´„ÇíË°®Á§∫
      window.showUnfollowModal = function(creatorId, creatorName, source) {
        const modal = document.getElementById('unfollowModal');
        const message = document.getElementById('unfollowModalMessage');
        const confirmButton = document.getElementById('unfollowConfirmButton');

        message.textContent = `${creatorName}„ÅÆ„Éï„Ç©„É≠„Éº„ÇíËß£Èô§„Åó„Åæ„Åô„ÅãÔºü`;

        confirmButton.onclick = function() {
          toggleFollow(creatorId);
          updateButtonState(creatorId, false, source);
          closeUnfollowModal();
        };

        modal.classList.add('active');
      };

      // „Éï„Ç©„É≠„ÉºËß£Èô§„É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
      window.closeUnfollowModal = function() {
        const modal = document.getElementById('unfollowModal');
        modal.classList.remove('active');
      };

      // „Éú„Çø„É≥„ÅÆÁä∂ÊÖã„ÇíÊõ¥Êñ∞
      function updateButtonState(creatorId, isFollowing, source) {
        const prefix = source === 'ranking' ? 'ranking-creator-' : 'creator-';
        const card = document.getElementById(prefix + creatorId);
        if (card) {
          const button = card.querySelector('.creator-card-follow-btn');
          if (button) {
            if (isFollowing) {
              button.className = 'creator-card-follow-btn following';
              button.textContent = '„Éï„Ç©„É≠„Éº‰∏≠';
            } else {
              button.className = 'creator-card-follow-btn';
              button.textContent = '„Éï„Ç©„É≠„Éº„Åô„Çã';
            }
            button.blur();
          }
        }
      }

      // Ê§úÁ¥¢
      document.getElementById('searchInput').addEventListener('input', function(e) {
        searchQuery = e.target.value;
        renderCreators();
      });

      // ÂàùÊúüË°®Á§∫Ôºà„É©„É≥„Ç≠„É≥„Ç∞„Çø„Éñ„ÇíË°®Á§∫Ôºâ
      renderRanking();

      // „É¢„Éê„Ç§„É´„É°„Éã„É•„Éº
      window.toggleMobileMenu = function() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('mobileMenuOverlay');
        sidebar.classList.toggle('mobile-active');
        overlay.classList.toggle('active');
      };

      window.closeMobileMenu = function() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('mobileMenuOverlay');
        sidebar.classList.remove('mobile-active');
        overlay.classList.remove('active');
      };
    });
  </script>
</body>
</html>
