<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#667eea">
  <meta name="description" content="é…ä¿¡è€…å°‚ç”¨ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯è²©å£²ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Pack&Play">
  <title>Pack&Play - é…ä¿¡è€…ã‚’æ¢ã™</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" sizes="192x192" href="assets/images/icon-192.png">
  <link rel="apple-touch-icon" href="assets/images/icon-192.png">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
      overflow-x: hidden;
      width: 100%;
    }

    body {
      display: flex;
      background: #f9fafb;
    }

    /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      width: 260px;
      background: white;
      border-right: 1px solid #e5e7eb;
      padding: 2rem 1.5rem 1rem;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      z-index: 1000;
    }

    .sidebar-logo {
      display: block;
      text-decoration: none;
      margin-bottom: 2rem;
      transition: opacity 0.2s;
    }

    .sidebar-logo:hover {
      opacity: 0.8;
    }

    .sidebar-logo-img {
      width: 100%;
      max-width: 180px;
      height: auto;
      display: block;
    }

    .sidebar-nav {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      flex: 1;
    }

    .sidebar-nav-link {
      color: #2d1b3d;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.125rem;
      padding: 1rem 1.25rem;
      border-radius: 0.75rem;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .sidebar-nav-link:hover {
      background: #f3f4f6;
    }

    .sidebar-nav-link.active {
      background: #f3f4f6;
      color: #FF1B8D;
    }

    /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ•ãƒƒã‚¿ãƒ¼ */
    .sidebar-footer {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid #e5e7eb;
    }

    .sidebar-footer-links {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }

    .sidebar-footer-link {
      color: #6b7280;
      text-decoration: none;
      font-size: 0.8125rem;
      transition: color 0.2s;
    }

    .sidebar-footer-link:hover {
      color: #2d1b3d;
      text-decoration: underline;
    }

    .sidebar-footer-copyright {
      color: #9ca3af;
      font-size: 0.75rem;
      line-height: 1.4;
    }

    /* ãƒ¡ã‚¤ãƒ³ãƒ©ãƒƒãƒ‘ãƒ¼ */
    .main-wrapper {
      margin-left: 260px;
      flex: 1;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      width: calc(100% - 260px);
      overflow-x: hidden;
    }

    /* é…ä¿¡è€…ã‚’æ¢ã™ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
    .discover-content {
      max-width: 900px;
      width: 100%;
      margin: 0 auto;
      padding: 2rem;
    }

    .discover-header {
      margin-bottom: 2rem;
    }

    .discover-title {
      font-size: 1.875rem;
      font-weight: 800;
      color: #2d1b3d;
      margin-bottom: 0.5rem;
    }

    .discover-description {
      color: #6b7280;
      font-size: 0.9375rem;
    }

    /* æ¤œç´¢ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */
    .search-filter-section {
      background: white;
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      width: 100%;
    }

    .search-box {
      position: relative;
      margin-bottom: 1rem;
      width: 100%;
    }

    .search-input {
      width: 100%;
      padding: 0.875rem 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 0.75rem;
      font-size: 0.9375rem;
      transition: all 0.2s;
      box-sizing: border-box;
    }

    .search-input:focus {
      outline: none;
      border-color: #FF1B8D;
      box-shadow: 0 0 0 3px rgba(255, 27, 141, 0.1);
    }

    .filter-buttons {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 0.625rem 1.25rem;
      border: 2px solid #e5e7eb;
      border-radius: 0.75rem;
      background: white;
      font-weight: 600;
      font-size: 0.875rem;
      cursor: pointer;
      transition: all 0.2s;
      color: #6b7280;
    }

    .filter-btn:hover {
      border-color: #FF1B8D;
      color: #FF1B8D;
    }

    .filter-btn.active {
      background: #FF1B8D;
      color: white;
      border-color: #FF1B8D;
    }

    /* é…ä¿¡è€…ãƒªã‚¹ãƒˆ */
    .creators-list {
      background: white;
      border-radius: 1rem;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      width: 100%;
    }

    /* discover.htmlå›ºæœ‰ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º */
    .creator-name-row {
      flex-wrap: wrap;
    }

    .creator-stats {
      margin-top: 0.25rem;
    }

    /* ç©ºã®çŠ¶æ…‹ */
    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
      color: #9ca3af;
      background: white;
      border-radius: 1rem;
    }

    .empty-state-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .empty-state-text {
      font-size: 0.9375rem;
    }

    .hidden {
      display: none;
    }

    /* ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ã¨ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã¯ css/style.css ã§å®šç¾© */

    .sidebar.mobile-active {
      transform: translateX(0);
    }

    /* ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
    @media (max-width: 768px) {
      body {
        display: block;
      }

      .mobile-menu-button {
        display: flex;
      }

      .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s;
      }

      .main-wrapper {
        margin-left: 0;
        width: 100%;
      }

      .discover-content {
        padding: 1rem;
        padding-top: 3.5rem;
        max-width: 100%;
      }

      .discover-title {
        font-size: 1.5rem;
      }

      .discover-description {
        font-size: 0.875rem;
      }

      .search-filter-section {
        padding: 1rem;
        width: 100%;
        box-sizing: border-box;
      }

      .search-box {
        width: 100%;
      }

      .search-input {
        width: 100%;
        box-sizing: border-box;
      }

      .creators-list {
        width: 100%;
      }

      /* ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã¯ css/style.css ã§å®šç¾© */
    }
  </style>
</head>
<body>
  <!-- ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ -->
  <button class="mobile-menu-button" id="mobileMenuButton" onclick="toggleMobileMenu()">
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7"></path>
    </svg>
  </button>

  <!-- ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
  <div class="mobile-menu-overlay" id="mobileMenuOverlay" onclick="closeMobileMenu()"></div>

  <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
  <aside class="sidebar" id="sidebar">
    <a href="profile.html" class="sidebar-logo">
      <img src="image/logo.png" alt="Pack&Play" class="sidebar-logo-img">
    </a>
    <nav class="sidebar-nav" id="sidebarNav">
      <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
    </nav>

    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <div class="sidebar-footer">
      <div class="sidebar-footer-links">
        <a href="legal/terms.html" class="sidebar-footer-link">åˆ©ç”¨è¦ç´„</a>
        <a href="legal/privacy.html" class="sidebar-footer-link">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼</a>
        <a href="legal/commerce.html" class="sidebar-footer-link">ç‰¹å•†æ³•è¡¨è¨˜</a>
        <a href="legal/scta.html" class="sidebar-footer-link">è³‡é‡‘æ±ºæ¸ˆæ³•</a>
        <a href="legal/contact.html" class="sidebar-footer-link">ãŠå•ã„åˆã‚ã›</a>
      </div>
      <div class="sidebar-footer-copyright">
        Â© 2025 Pack&Play
      </div>
    </div>
  </aside>

  <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
  <div class="main-wrapper">
    <div class="discover-content">
      <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
      <div class="discover-header">
        <h1 class="discover-title">é…ä¿¡è€…ã‚’æ¢ã™</h1>
        <p class="discover-description">ãŠæ°—ã«å…¥ã‚Šã®é…ä¿¡è€…ã‚’è¦‹ã¤ã‘ã¦ã€ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒƒã‚¯ã§å¿œæ´ã—ã‚ˆã†</p>
      </div>

      <!-- ã‚¿ãƒ–UI -->
      <div class="tabs-container">
        <div class="tabs-list">
          <button class="tab-button active" id="rankingTab" onclick="switchTab('ranking')">
            ãƒ©ãƒ³ã‚­ãƒ³ã‚°
          </button>
          <button class="tab-button" id="allListTab" onclick="switchTab('allList')">
            å…¨ä½“ã®ä¸€è¦§
          </button>
        </div>
      </div>

      <!-- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
      <div class="tab-content active" id="rankingContent">
        <!-- æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
        <div class="filter-select-container">
          <select id="periodSelect" class="filter-select" onchange="filterByPeriod()">
            <option value="today">24æ™‚é–“</option>
            <option value="week">ä»Šé€±</option>
            <option value="month">ä»Šæœˆ</option>
            <option value="year">ä»Šå¹´</option>
          </select>
        </div>

        <!-- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒªã‚¹ãƒˆ -->
        <div class="creators-list" id="rankingList">
          <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
        </div>
      </div>

      <!-- å…¨ä½“ã®ä¸€è¦§ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
      <div class="tab-content" id="allListContent">
        <!-- æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ -->
        <div class="search-box-container">
          <input
            type="search"
            id="searchInput"
            placeholder="é…ä¿¡è€…ã‚’æ¤œç´¢..."
            class="search-input"
          >
        </div>

        <!-- ã‚½ãƒ¼ãƒˆãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
        <div class="filter-select-container">
          <select id="sortSelect" class="filter-select" onchange="sortCreators()">
            <option value="followers">ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°é †</option>
            <option value="name">åå‰é †</option>
            <option value="live">é…ä¿¡ä¸­</option>
          </select>
        </div>

        <!-- é…ä¿¡è€…ãƒªã‚¹ãƒˆ -->
        <div class="creators-list" id="creatorsList">
          <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
        </div>

        <div id="emptyState" class="empty-state hidden">
          <div class="empty-state-icon">ğŸ”</div>
          <div class="empty-state-text">é…ä¿¡è€…ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ãƒ•ã‚©ãƒ­ãƒ¼è§£é™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="confirm-modal" id="unfollowModal">
    <div class="confirm-modal-content">
      <div class="confirm-modal-title">ãƒ•ã‚©ãƒ­ãƒ¼è§£é™¤ã®ç¢ºèª</div>
      <div class="confirm-modal-message" id="unfollowModalMessage"></div>
      <div class="confirm-modal-buttons">
        <button class="confirm-modal-button confirm-modal-button-cancel" onclick="closeUnfollowModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button class="confirm-modal-button confirm-modal-button-confirm" id="unfollowConfirmButton">è§£é™¤ã™ã‚‹</button>
      </div>
    </div>
  </div>

  <script src="js/mock-data.js"></script>
  <script src="js/main.js"></script>
  <script>
    // DOMãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã‹ã‚‰å®Ÿè¡Œ
    document.addEventListener('DOMContentLoaded', function() {
      // ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç”Ÿæˆï¼ˆmain.jsã®å…±é€šé–¢æ•°ã‚’ä½¿ç”¨ï¼‰
      renderSidebarNav('discover');

      // çŠ¶æ…‹ç®¡ç†
      let currentTab = 'ranking';
      let currentPeriod = 'today';
      let currentSort = 'followers';
      let searchQuery = '';

      // ã‚¹ãƒ‘ãƒ¼ã‚¯æ•°ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆKå˜ä½ï¼‰
      function formatSparks(num) {
        if (num >= 1000) {
          const k = num / 1000;
          // å°æ•°ç‚¹1æ¡ã¾ã§è¡¨ç¤ºï¼ˆ.0ã®å ´åˆã¯æ•´æ•°è¡¨ç¤ºï¼‰
          return k % 1 === 0 ? `${k}K` : `${k.toFixed(1)}K`;
        }
        return num.toString();
      }

      // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
      window.switchTab = function(tab) {
        currentTab = tab;

        // ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
        document.getElementById('rankingTab').classList.toggle('active', tab === 'ranking');
        document.getElementById('allListTab').classList.toggle('active', tab === 'allList');

        // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
        document.getElementById('rankingContent').classList.toggle('active', tab === 'ranking');
        document.getElementById('allListContent').classList.toggle('active', tab === 'allList');

        // è¡¨ç¤ºã‚’æ›´æ–°
        if (tab === 'ranking') {
          renderRanking();
        } else {
          renderCreators();
        }
      };

      // æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åˆ‡ã‚Šæ›¿ãˆï¼ˆãƒ©ãƒ³ã‚­ãƒ³ã‚°ç”¨ï¼‰
      window.filterByPeriod = function() {
        currentPeriod = document.getElementById('periodSelect').value;
        renderRanking();
      };

      // ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º
      function renderRanking() {
        const list = document.getElementById('rankingList');
        const followedIds = getFollowedCreators();

        // ã‚¹ãƒ‘ãƒ¼ã‚¯æ¶ˆè²»é‡ã§ã‚½ãƒ¼ãƒˆ
        let ranked = [...creators].sort((a, b) => {
          const aValue = a.sparksConsumed ? a.sparksConsumed[currentPeriod] : 0;
          const bValue = b.sparksConsumed ? b.sparksConsumed[currentPeriod] : 0;
          return bValue - aValue;
        });

        list.innerHTML = ranked.map((creator, index) => {
          const isFollowing = followedIds.includes(creator.id);
          const rank = index + 1;
          const sparks = creator.sparksConsumed ? creator.sparksConsumed[currentPeriod] : 0;
          const isTopThree = rank <= 3;

          // ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç•ªå·ã®ã‚¯ãƒ©ã‚¹ã‚’æ±ºå®š
          let rankClass = '';
          if (rank === 1) rankClass = ' ranking-number-gold';
          else if (rank === 2) rankClass = ' ranking-number-silver';
          else if (rank === 3) rankClass = ' ranking-number-bronze';
          else if (isTopThree) rankClass = ' ranking-number-top3';

          return `
            <div class="creator-card ranking-card${isTopThree ? ' ranking-top3' : ''}" id="ranking-creator-${creator.id}">
              <div class="ranking-number${rankClass}">${rank}</div>
              <a href="creator/${creator.slug}.html" class="creator-card-link">
                <div class="creator-avatar">
                  ${creator.name.charAt(0)}
                  ${creator.isLive ? '<span class="live-signal"></span>' : ''}
                </div>
                <div class="creator-info">
                  <div class="creator-name-row">
                    <span class="creator-name">${creator.name}</span>
                    <span class="creator-id">@${creator.slug}</span>
                  </div>
                  <div class="creator-bio">${creator.bio || ''}</div>
                  <div class="creator-stats">
                    <span class="sparks-consumed${isTopThree ? ' sparks-consumed-top3' : ''}">
                      <strong>æ¶ˆè²»ã‚¹ãƒ‘ãƒ¼ã‚¯</strong> ${formatSparks(sparks)}
                    </span>
                  </div>
                </div>
              </a>
              <button class="follow-button${isFollowing ? ' following' : ''}" onclick="toggleFollowButton(${creator.id}, event, 'ranking')">
                <span>${isFollowing ? 'ãƒ•ã‚©ãƒ­ãƒ¼ä¸­' : 'ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹'}</span>
              </button>
            </div>
          `;
        }).join('');
      }

      // ã‚½ãƒ¼ãƒˆå¤‰æ›´ï¼ˆå…¨ä½“ã®ä¸€è¦§ç”¨ï¼‰
      window.sortCreators = function() {
        currentSort = document.getElementById('sortSelect').value;
        renderCreators();
      };

      // é…ä¿¡è€…ãƒªã‚¹ãƒˆè¡¨ç¤ºï¼ˆå…¨ä½“ã®ä¸€è¦§ï¼‰
      function renderCreators() {
        const list = document.getElementById('creatorsList');
        const emptyState = document.getElementById('emptyState');
        const followedIds = getFollowedCreators();

        // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
        let filtered = [...creators];

        if (searchQuery) {
          filtered = filtered.filter(c =>
            c.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
            c.slug.toLowerCase().includes(searchQuery.toLowerCase())
          );
        }

        // ã‚½ãƒ¼ãƒˆ
        if (currentSort === 'followers') {
          filtered.sort((a, b) => (b.followerCount || 0) - (a.followerCount || 0));
        } else if (currentSort === 'name') {
          filtered.sort((a, b) => a.name.localeCompare(b.name, 'ja'));
        } else if (currentSort === 'live') {
          filtered.sort((a, b) => {
            if (a.isLive && !b.isLive) return -1;
            if (!a.isLive && b.isLive) return 1;
            return 0;
          });
        }

        if (filtered.length === 0) {
          list.innerHTML = '';
          emptyState.classList.remove('hidden');
          return;
        }

        emptyState.classList.add('hidden');

        list.innerHTML = filtered.map(creator => {
          const isFollowing = followedIds.includes(creator.id);
          return `
            <div class="creator-card" id="creator-${creator.id}">
              <a href="creator/${creator.slug}.html" class="creator-card-link">
                <div class="creator-avatar">
                  ${creator.name.charAt(0)}
                  ${creator.isLive ? '<span class="live-signal"></span>' : ''}
                </div>
                <div class="creator-info">
                  <div class="creator-name-row">
                    <span class="creator-name">${creator.name}</span>
                    <span class="creator-id">@${creator.slug}</span>
                  </div>
                  <div class="creator-bio">${creator.bio || ''}</div>
                  <div class="creator-stats">
                    <span>ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ ${(creator.followerCount || 0).toLocaleString()}äºº</span>
                  </div>
                </div>
              </a>
              <button class="follow-button${isFollowing ? ' following' : ''}" onclick="toggleFollowButton(${creator.id}, event, 'list')">
                <span>${isFollowing ? 'ãƒ•ã‚©ãƒ­ãƒ¼ä¸­' : 'ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹'}</span>
              </button>
            </div>
          `;
        }).join('');
      }

      // ãƒ•ã‚©ãƒ­ãƒ¼ãƒœã‚¿ãƒ³ã®ãƒˆã‚°ãƒ«
      window.toggleFollowButton = function(creatorId, event, source) {
        event.preventDefault();
        event.stopPropagation();

        const creator = creators.find(c => c.id === creatorId);
        const creatorName = creator ? creator.name : 'é…ä¿¡è€…';
        const followedIds = getFollowedCreators();
        const isFollowing = followedIds.includes(creatorId);

        if (isFollowing) {
          // ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
          showUnfollowModal(creatorId, creatorName, source);
        } else {
          toggleFollow(creatorId);
          updateButtonState(creatorId, true, source);
        }
      };

      // ãƒ•ã‚©ãƒ­ãƒ¼è§£é™¤ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
      window.showUnfollowModal = function(creatorId, creatorName, source) {
        const modal = document.getElementById('unfollowModal');
        const message = document.getElementById('unfollowModalMessage');
        const confirmButton = document.getElementById('unfollowConfirmButton');

        message.textContent = `${creatorName}ã®ãƒ•ã‚©ãƒ­ãƒ¼ã‚’è§£é™¤ã—ã¾ã™ã‹ï¼Ÿ`;

        confirmButton.onclick = function() {
          toggleFollow(creatorId);
          updateButtonState(creatorId, false, source);
          closeUnfollowModal();
        };

        modal.classList.add('active');
      };

      // ãƒ•ã‚©ãƒ­ãƒ¼è§£é™¤ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
      window.closeUnfollowModal = function() {
        const modal = document.getElementById('unfollowModal');
        modal.classList.remove('active');
      };

      // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°
      function updateButtonState(creatorId, isFollowing, source) {
        const prefix = source === 'ranking' ? 'ranking-creator-' : 'creator-';
        const card = document.getElementById(prefix + creatorId);
        if (card) {
          const button = card.querySelector('.follow-button');
          if (button) {
            if (isFollowing) {
              button.className = 'follow-button following';
              button.innerHTML = '<span>ãƒ•ã‚©ãƒ­ãƒ¼ä¸­</span>';
            } else {
              button.className = 'follow-button';
              button.innerHTML = '<span>ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹</span>';
            }
            button.blur();
          }
        }
      }

      // æ¤œç´¢
      document.getElementById('searchInput').addEventListener('input', function(e) {
        searchQuery = e.target.value;
        renderCreators();
      });

      // åˆæœŸè¡¨ç¤ºï¼ˆãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚¿ãƒ–ã‚’è¡¨ç¤ºï¼‰
      renderRanking();

      // ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼
      window.toggleMobileMenu = function() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('mobileMenuOverlay');
        sidebar.classList.toggle('mobile-active');
        overlay.classList.toggle('active');
      };

      window.closeMobileMenu = function() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('mobileMenuOverlay');
        sidebar.classList.remove('mobile-active');
        overlay.classList.remove('active');
      };
    });
  </script>
</body>
</html>
